
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>1 Finding Concurrent ECOSTRESS and EMIT Data &#8212; Hyperspectral notebook 1</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '01_Finding_Concurrent_Data';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Visualizing hyperspectral signatures of agricultural crops" href="Panel_02A.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Hyperspectral notebook 1 - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Hyperspectral notebook 1 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to PRA
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Hyperspectral data exploration - Water</a></li>
<li class="toctree-l1"><a class="reference internal" href="Panel_01.html">Build an App</a></li>
<li class="toctree-l1"><a class="reference internal" href="Panel_02A.html">Visualizing hyperspectral signatures of agricultural crops</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">1 Finding Concurrent ECOSTRESS and EMIT Data</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F01_Finding_Concurrent_Data.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/01_Finding_Concurrent_Data.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>1 Finding Concurrent ECOSTRESS and EMIT Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">1. Setup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nasa-earthdata-login-credentials">1.2 NASA Earthdata Login Credentials</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#search-for-ecostress-and-emit-data">2. Search for ECOSTRESS and EMIT Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-spatial-region-of-interest">2.1 Define Spatial Region of Interest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-collections-of-interest">2.2 Define Collections of Interest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-date-range">2.3 Define Date Range</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#searching">2.4 Searching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#organizing-and-filtering-results">3. Organizing and Filtering Results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-intersecting-coverage">4. Visualizing Intersecting Coverage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#previewing-emit-browse-imagery">4.2 Previewing EMIT Browse Imagery</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-filtering">4.3 Further Filtering</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-a-list-of-urls">5. Generating a list of URLs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#streaming-or-downloading-data">6. Streaming or Downloading Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streaming-data-workflow">6.1 Streaming Data Workflow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-data-workflow">6.2 Downloading Data Workflow</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contact-info">Contact Info:</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="finding-concurrent-ecostress-and-emit-data">
<h1>1 Finding Concurrent ECOSTRESS and EMIT Data<a class="headerlink" href="#finding-concurrent-ecostress-and-emit-data" title="Link to this heading">#</a></h1>
<p><strong>Summary</strong></p>
<p>Both the ECOsystem Spaceborne Thermal Radiometer Experiment on Space Station (ECOSTRESS) and the Earth surface Mineral dust source InvesTigation (EMIT) instruments are located on the International Space Station (ISS). Their overlapping fields of view provide an unprecedented opportunity to demonstrate the compounded benefits of working with both datasets. In this notebook we will show how to utilize the <a class="reference external" href="https://github.com/nsidc/earthaccess"><code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> Python library</a> to find concurrent ECOSTRESS and EMIT data.</p>
<div>
<img src="./img/concurrent_data.png" width="750"/>
</div>
<p><strong>Background</strong></p>
<p>The <strong>ECOSTRESS</strong> instrument is a multispectral thermal imaging radiometer designed to answer three overarching science questions:</p>
<ul class="simple">
<li><p>How is the terrestrial biosphere responding to changes in water availability?</p></li>
<li><p>How do changes in diurnal vegetation water stress  the global carbon cycle?</p></li>
<li><p>Can agricultural vulnerability be reduced through advanced monitoring of agricultural water consumptive use and improved drought   estimation?</p></li>
</ul>
<p>The ECOSTRESS mission is answering these questions by accurately measuring the temperature of plants.  Plants regulate their temperature by releasing water through tiny pores on their leaves called stomata. If they have sufficient water they can maintain their temperature, but if there is insufficient water, their temperatures rise and this temperature rise can be measured with ECOSTRESS. The images acquired by ECOSTRESS are the most detailed temperature images of the surface ever acquired from space and can be used to measure the temperature of an individual farmers field.</p>
<p>More details about ECOSTRESS and its associated products can be found on the <a class="reference external" href="https://ecostress.jpl.nasa.gov/">ECOSTRESS website</a> and <a class="reference external" href="https://lpdaac.usgs.gov/product_search/?query=ECOSTRESS&amp;amp;status=Operational&amp;amp;view=cards&amp;amp;sort=title">ECOSTRESS product pages</a> hosted by the Land Processes Distributed Active Archive Center (LP DAAC).</p>
<p>The <strong>EMIT</strong> instrument is an imaging spectrometer that measures light in visible and infrared wavelengths. These measurements display unique spectral signatures that correspond to the composition on the Earth’s surface. The EMIT mission focuses specifically on mapping the composition of minerals to better understand the effects of mineral dust throughout the Earth system and human populations now and in the future. In addition, the EMIT instrument can be used in other applications, such as mapping of greenhouse gases, snow properties, and water resources.</p>
<p>More details about EMIT and its associated products can be found on the <a class="reference external" href="https://earth.jpl.nasa.gov/emit/">EMIT website</a> and <a class="reference external" href="https://lpdaac.usgs.gov/product_search/?query=EMIT&amp;amp;status=Operational&amp;amp;view=cards&amp;amp;sort=title">EMIT product pages</a> hosted by the LP DAAC.</p>
<p><strong>Requirements</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://urs.earthdata.nasa.gov/home">NASA Earthdata Account</a></p></li>
<li><p><em>No Python setup requirements if connected to the workshop cloud instance!</em></p></li>
<li><p><strong>Local Only</strong> Set up Python Environment - See <strong>setup_instructions.md</strong> in the <code class="docutils literal notranslate"><span class="pre">/setup/</span></code> folder to set up a local compatible Python environment</p></li>
</ul>
<p><strong>Learning Objectives</strong></p>
<ul class="simple">
<li><p>How to use <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> to find concurrent EMIT and ECOSTRESS data.</p></li>
<li><p>How to export a list of files and download them programmatically.</p></li>
</ul>
<p><strong>Tutorial Outline</strong></p>
<ol class="arabic simple">
<li><p>Setup</p></li>
<li><p>Searching for EMIT and ECOSTRESS Data</p></li>
<li><p>Organizing and Filtering Results</p></li>
<li><p>Visualizing Intersecting Coverage</p></li>
<li><p>Creating a list of Results and Desired Asset URLs</p></li>
<li><p>Streaming or Downloading Data</p></li>
</ol>
<section id="setup">
<h2>1. Setup<a class="headerlink" href="#setup" title="Link to this heading">#</a></h2>
<p>Import the required Python libraries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import required libraries</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">earthaccess</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">folium.plugins</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="kn">from</span> <span class="nn">branca.element</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span> <span class="nn">shapely</span> <span class="kn">import</span> <span class="n">geometry</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">io</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">shapely.geometry.polygon</span> <span class="kn">import</span> <span class="n">orient</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Import required libraries</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">import</span> <span class="nn">os</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">folium</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">earthaccess</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="kn">import</span> <span class="nn">warnings</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;folium&#39;
</pre></div>
</div>
</div>
</div>
<section id="nasa-earthdata-login-credentials">
<h3>1.2 NASA Earthdata Login Credentials<a class="headerlink" href="#nasa-earthdata-login-credentials" title="Link to this heading">#</a></h3>
<p>To download or stream NASA data you will need an Earthdata account, you can create one <a class="reference external" href="https://urs.earthdata.nasa.gov/home">here</a>. We will use the <code class="docutils literal notranslate"><span class="pre">login</span></code> function from the <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> library for authentication before downloading at the end of the notebook. This function can also be used to create a local <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file if it doesn’t exist or add your login info to an existing <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file. If no Earthdata Login credentials are found in the <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> you’ll be prompted for them. This step is not necessary to conduct searches but is needed to download or stream data.</p>
</section>
</section>
<section id="search-for-ecostress-and-emit-data">
<h2>2. Search for ECOSTRESS and EMIT Data<a class="headerlink" href="#search-for-ecostress-and-emit-data" title="Link to this heading">#</a></h2>
<p>Both EMIT and ECOSTRESS products are hosted by the Land Processes Distributed Active Archive Center (LP DAAC). In this example we will use the cloud-hosted EMIT_L2A_RFL and ECOSTRESS_L2T_LSTE products available from the LP DAAC to find data. Any results we find for these products, should be available for other products within the EMIT and ECOSTRESS collections.</p>
<p>To find data we will use the <a class="reference external" href="https://github.com/nsidc/earthaccess"><code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> Python library</a>. <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> searches NASA’s Common Metadata Repository (CMR), a metadata system that catalogs Earth Science data and associated metadata records. The results can then be used to download granules or generate lists of granule search result URLs.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> we can search based on the attributes of a granule, which can be thought of as a spatiotemporal scene from an instrument containing multiple assets (ex: Reflectance, Reflectance Uncertainty, Masks for the EMIT L2A Reflectance Collection). We can search using attributes such as collection, acquisition time, and spatial footprint. This process can also be used with other EMIT or ECOSTRESS products, other collections, or different data providers, as well as across multiple catalogs with some modification.</p>
<section id="define-spatial-region-of-interest">
<h3>2.1 Define Spatial Region of Interest<a class="headerlink" href="#define-spatial-region-of-interest" title="Link to this heading">#</a></h3>
<p>For this example, our spatial region of interest (ROI) will be the a region near Santa Barbara, CA that contains the <a class="reference external" href="https://www.dangermondpreserve.org/">Jack and Laura Dangermond Preserve</a> and the <a class="reference external" href="https://sedgwick.nrs.ucsb.edu/">Sedgwick Reserve</a>.</p>
<p>In this example, we will create a rectangular ROI surrounding these two reserves as well as some of the agricultural region between. Even though the shape is rectangular we elect to search using a polygon rather than a standard bounding box in <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> because bounding boxes will typically have a larger spatial extent, capturing a lot of area we may not be interested in. This becomes more important for searches with larger ROIs than our example here. To search for intersections with a polygon using earthaccess, we need to format our ROI as a counterclockwise list of coordinate pairs.</p>
<p>Open the <code class="docutils literal notranslate"><span class="pre">geojson</span></code> file containing the Dangermond and Sedgwick boundaries as a <code class="docutils literal notranslate"><span class="pre">geodataframe</span></code>, and check the coordinate reference system (CRS) of the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">polygon</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;../data/agu_workshop_roi.geojson&#39;</span><span class="p">)</span>
<span class="n">polygon</span><span class="o">.</span><span class="n">crs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Geographic 2D CRS: EPSG:4326&gt;
Name: WGS 84
Axis Info [ellipsoidal]:
- Lat[north]: Geodetic latitude (degree)
- Lon[east]: Geodetic longitude (degree)
Area of Use:
- name: World.
- bounds: (-180.0, -90.0, 180.0, 90.0)
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich
</pre></div>
</div>
</div>
</div>
<p>The CRS is <strong>EPSG:4326</strong> (WGS84), which is also the CRS we want the data in to submit for our search.</p>
<p>Next, let’s examine our polygon a bit closer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">polygon</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Acreage</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sedgwick Reserve</td>
      <td>5874.210000</td>
      <td>POLYGON ((-120.04041 34.74342, -120.04122 34.7...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Dangermond Preserve</td>
      <td>24458.615397</td>
      <td>POLYGON ((-120.47367 34.56987, -120.47427 34.5...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can see this <code class="docutils literal notranslate"><span class="pre">geodataframe</span></code> consists of two polygons, that we want to include in our study site. We need to create an exterior boundary polygon containing these, and make sure the vertices are in counterclockwise order to submit them in our query. To do this, create a polygon consisting of all the geometries, then create a bounding rectangle. This will give us a simple exterior polygon around our two ROIs. After that, use the <code class="docutils literal notranslate"><span class="pre">orient</span></code> function to place our coordinate pairs in counterclockwise order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Merge all Polygon geometries and create external boundary</span>
<span class="n">roi_poly</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">unary_union</span><span class="o">.</span><span class="n">envelope</span>
<span class="c1"># Re-order vertices to counterclockwise</span>
<span class="n">roi_poly</span> <span class="o">=</span> <span class="n">orient</span><span class="p">(</span><span class="n">roi_poly</span><span class="p">,</span> <span class="n">sign</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Make a <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> consisting of the bounding box geometry.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Name&quot;</span><span class="p">:[</span><span class="s2">&quot;ROI Bounding Box&quot;</span><span class="p">]})</span>
<span class="n">agu_bbox</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">({</span><span class="s2">&quot;Name&quot;</span><span class="p">:[</span><span class="s2">&quot;ROI Bounding Box&quot;</span><span class="p">],</span> <span class="s2">&quot;geometry&quot;</span><span class="p">:[</span><span class="n">roi_poly</span><span class="p">]},</span><span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">agu_bbox</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ROI Bounding Box</td>
      <td>POLYGON ((-120.49929 34.44230, -120.01175 34.4...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can write this bounding box to a file for use in future notebooks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#agu_bbox.to_file(&#39;../data/roi_bbox.geojson&#39;, driver=&#39;GeoJSON&#39;)</span>
</pre></div>
</div>
</div>
</div>
<p>We can go ahead and visualize our region of interest and the exterior boundary polygon containing ROIs. First add a function to help reformat bounding box coordinates to work with leaflet notation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Function to convert a bounding box for use in leaflet notation</span>

<span class="k">def</span> <span class="nf">convert_bounds</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">invert_y</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper method for changing bounding box representation to leaflet notation</span>

<span class="sd">    ``(lon1, lat1, lon2, lat2) -&gt; ((lat1, lon1), (lat2, lon2))``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">bbox</span>
    <span class="k">if</span> <span class="n">invert_y</span><span class="p">:</span>
        <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y1</span>
    <span class="k">return</span> <span class="p">((</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">),</span> <span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;375px&quot;</span><span class="p">)</span>
<span class="n">map1</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;https://mt1.google.com/vt/lyrs=y&amp;x=</span><span class="si">{x}</span><span class="s1">&amp;y=</span><span class="si">{y}</span><span class="s1">&amp;z=</span><span class="si">{z}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;Google&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">map1</span><span class="p">)</span>

<span class="c1"># Add Convex Hull Polygon</span>
<span class="n">folium</span><span class="o">.</span><span class="n">GeoJson</span><span class="p">(</span><span class="n">agu_bbox</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bounding_box&#39;</span><span class="p">,</span>
                <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">map1</span><span class="p">)</span>

<span class="c1"># Add roi geodataframe</span>
<span class="n">polygon</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span>
    <span class="s2">&quot;Name&quot;</span><span class="p">,</span>
    <span class="n">popup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">categorical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Set3&#39;</span><span class="p">,</span>
    <span class="n">style_kwds</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">fillOpacity</span><span class="o">=</span><span class="mf">0.4</span><span class="p">),</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Regions of Interest&quot;</span><span class="p">,</span>
    <span class="n">m</span><span class="o">=</span><span class="n">map1</span>
<span class="p">)</span>

<span class="n">map1</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">folium</span><span class="o">.</span><span class="n">LayerControl</span><span class="p">())</span>
<span class="n">map1</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="n">convert_bounds</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">unary_union</span><span class="o">.</span><span class="n">bounds</span><span class="p">))</span>
<span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_67adf28a1aeef1643593c965021cd60f {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
    
                    &lt;style&gt;
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;
            
    
                    &lt;style&gt;
                        .foliumpopup {
                            margin: auto;
                        }
                       .foliumpopup table{
                            margin: auto;
                        }
                        .foliumpopup tr{
                            text-align: left;
                        }
                        .foliumpopup th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;
            
    
    &lt;script src=&quot;https://code.jquery.com/ui/1.12.1/jquery-ui.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;$( function() {
        $( &quot;.maplegend&quot; ).draggable({
            start: function (event, ui) {
                $(this).css({
                    right: &quot;auto&quot;,
                    top: &quot;auto&quot;,
                    bottom: &quot;auto&quot;
                });
            }
        });
    });
    &lt;/script&gt;
    &lt;style type=&#x27;text/css&#x27;&gt;
      .maplegend {
        position: absolute;
        z-index:9999;
        background-color: rgba(255, 255, 255, .8);
        border-radius: 5px;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        padding: 10px;
        font: 12px/14px Arial, Helvetica, sans-serif;
        right: 10px;
        bottom: 20px;
      }
      .maplegend .legend-title {
        text-align: left;
        margin-bottom: 5px;
        font-weight: bold;
        }
      .maplegend .legend-scale ul {
        margin: 0;
        margin-bottom: 0px;
        padding: 0;
        float: left;
        list-style: none;
        }
      .maplegend .legend-scale ul li {
        list-style: none;
        margin-left: 0;
        line-height: 16px;
        margin-bottom: 2px;
        }
      .maplegend ul.legend-labels li span {
        display: block;
        float: left;
        height: 14px;
        width: 14px;
        margin-right: 5px;
        margin-left: 0;
        border: 0px solid #ccc;
        }
      .maplegend .legend-source {
        color: #777;
        clear: both;
        }
      .maplegend a {
        color: #777;
        }
    &lt;/style&gt;
    
&lt;/head&gt;
&lt;body&gt;
    
    
    &lt;div id=&#x27;maplegend Name&#x27; class=&#x27;maplegend&#x27;&gt;
        &lt;div class=&#x27;legend-title&#x27;&gt;Name&lt;/div&gt;
        &lt;div class=&#x27;legend-scale&#x27;&gt;
            &lt;ul class=&#x27;legend-labels&#x27;&gt;
                &lt;li&gt;&lt;span style=&#x27;background:#8dd3c7&#x27;&gt;&lt;/span&gt;Dangermond Preserve&lt;/li&gt;
                &lt;li&gt;&lt;span style=&#x27;background:#ffed6f&#x27;&gt;&lt;/span&gt;Sedgwick Reserve&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_67adf28a1aeef1643593c965021cd60f&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_67adf28a1aeef1643593c965021cd60f = L.map(
                &quot;map_67adf28a1aeef1643593c965021cd60f&quot;,
                {
                    center: [0.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    zoom: 1,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_38c24c30180ca803ca473d019620de1e = L.tileLayer(
                &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot;,
                {&quot;attribution&quot;: &quot;Google&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_38c24c30180ca803ca473d019620de1e.addTo(map_67adf28a1aeef1643593c965021cd60f);
        
    

        function geo_json_efc714008e38180c66829e6168b8ceb5_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_efc714008e38180c66829e6168b8ceb5 = L.geoJson(null, {
                onEachFeature: geo_json_efc714008e38180c66829e6168b8ceb5_onEachFeature,
            
        });

        function geo_json_efc714008e38180c66829e6168b8ceb5_add (data) {
            geo_json_efc714008e38180c66829e6168b8ceb5
                .addData(data);
        }
            geo_json_efc714008e38180c66829e6168b8ceb5_add({&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;features&quot;: [{&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.499289029747, 34.4422979925537], [-120.01175444547289, 34.4422979925537], [-120.01175444547289, 34.743985733609556], [-120.499289029747, 34.743985733609556], [-120.499289029747, 34.4422979925537]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Name&quot;: &quot;ROI Bounding Box&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
            geo_json_efc714008e38180c66829e6168b8ceb5.addTo(map_67adf28a1aeef1643593c965021cd60f);
        
    
        function geo_json_835882390e28817de65a700af39b1975_styler(feature) {
            switch(feature.id) {
                case &quot;0&quot;: 
                    return {&quot;color&quot;: &quot;#ffed6f&quot;, &quot;fillColor&quot;: &quot;#ffed6f&quot;, &quot;fillOpacity&quot;: 0.4, &quot;opacity&quot;: 0.7, &quot;weight&quot;: 2};
                default:
                    return {&quot;color&quot;: &quot;#8dd3c7&quot;, &quot;fillColor&quot;: &quot;#8dd3c7&quot;, &quot;fillOpacity&quot;: 0.4, &quot;opacity&quot;: 0.7, &quot;weight&quot;: 2};
            }
        }
        function geo_json_835882390e28817de65a700af39b1975_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_835882390e28817de65a700af39b1975_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_835882390e28817de65a700af39b1975_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_835882390e28817de65a700af39b1975_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_835882390e28817de65a700af39b1975.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_835882390e28817de65a700af39b1975_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_835882390e28817de65a700af39b1975 = L.geoJson(null, {
                onEachFeature: geo_json_835882390e28817de65a700af39b1975_onEachFeature,
            
                style: geo_json_835882390e28817de65a700af39b1975_styler,
                pointToLayer: geo_json_835882390e28817de65a700af39b1975_pointToLayer,
        });

        function geo_json_835882390e28817de65a700af39b1975_add (data) {
            geo_json_835882390e28817de65a700af39b1975
                .addData(data);
        }
            geo_json_835882390e28817de65a700af39b1975_add({&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;features&quot;: [{&quot;bbox&quot;: [-120.07168830185367, 34.67874372675126, -120.01175444547289, 34.743985733609556], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.04041123986089, 34.74342268352134], [-120.04121889204112, 34.743735066665835], [-120.04233680955474, 34.743985733609556], [-120.04347866996883, 34.742743832848156], [-120.04466572607036, 34.7424755469407], [-120.0448866879965, 34.74191265779671], [-120.04532294168776, 34.74159883138454], [-120.04804960173333, 34.741930978842824], [-120.04882554857339, 34.74223480319798], [-120.04949820119256, 34.74213674742191], [-120.04993617368781, 34.74236084527639], [-120.05063226768779, 34.74246510413567], [-120.05084529371707, 34.74296515425221], [-120.05181991617927, 34.742292688494636], [-120.05248533194795, 34.74258310344906], [-120.05311871770458, 34.742205091313274], [-120.0537722979379, 34.7422376073561], [-120.05409711012827, 34.74194830623631], [-120.0543713797112, 34.74209128417946], [-120.05479918084599, 34.74210391650734], [-120.05579592922335, 34.741837342896304], [-120.05694257691489, 34.74214544480658], [-120.05741042037987, 34.74181489507682], [-120.05767271320745, 34.74132546754863], [-120.05754227015422, 34.740740878009824], [-120.05876345149959, 34.74069180836263], [-120.05917953489605, 34.74018712575532], [-120.0587615854979, 34.739770015724844], [-120.06043616892654, 34.73832197492165], [-120.06128451686234, 34.73743320382969], [-120.0633872937648, 34.73640466515508], [-120.0639059857869, 34.7363786768863], [-120.06403134870462, 34.73519616510308], [-120.06454804185732, 34.734541873380046], [-120.06744848879882, 34.733043732603065], [-120.070616303288, 34.72952389483826], [-120.07043959994115, 34.72724173490022], [-120.0711658556598, 34.72294007365655], [-120.07168830185367, 34.71997034050748], [-120.06802222094016, 34.71707138144172], [-120.0643838637534, 34.71556891113268], [-120.06181919501256, 34.71432727384942], [-120.06086869366344, 34.7146474924856], [-120.0601201043257, 34.7146055700268], [-120.05915143262852, 34.712156508207215], [-120.05914365552792, 34.71213594341261], [-120.0579297886696, 34.709929219916546], [-120.05770835562292, 34.70940385347888], [-120.05751031403676, 34.708753407845755], [-120.05739358464504, 34.707625117415304], [-120.05644763385853, 34.70594280996333], [-120.05643958520336, 34.70592877328525], [-120.05560802087543, 34.7041919156709], [-120.05554467210189, 34.70251089221562], [-120.05550630815135, 34.701492772768894], [-120.055461488798, 34.7005885983348], [-120.0554596736261, 34.7005550655234], [-120.0554039826769, 34.69948129063735], [-120.05538831873399, 34.698385230495944], [-120.05526178291916, 34.69616125098816], [-120.05517157722116, 34.694136196842145], [-120.05507940302671, 34.69206681413075], [-120.05507556891348, 34.691797549336464], [-120.05506238375865, 34.69087158829482], [-120.05516147749043, 34.69025048197192], [-120.05537367433509, 34.688920416937414], [-120.05477895715674, 34.687500193851115], [-120.05421030242205, 34.68614216540855], [-120.05437973139783, 34.683147158844996], [-120.05446824425277, 34.681582630902554], [-120.05427316208798, 34.68056492337604], [-120.05409520266919, 34.67963650372387], [-120.05409236336455, 34.67898649251284], [-120.05086593954367, 34.67894506251114], [-120.04735720219035, 34.67889985551723], [-120.0454382179078, 34.67887508968519], [-120.04296564515735, 34.67884313196442], [-120.03885718195134, 34.67878992264703], [-120.03882024814752, 34.67878944343524], [-120.038822553688, 34.67878278821947], [-120.03864999677779, 34.67878153792925], [-120.03857836007664, 34.67878101897387], [-120.0375931324717, 34.6787738631857], [-120.03344480724418, 34.67877083712449], [-120.0285350182976, 34.67874372675126], [-120.02766842116552, 34.67966056614673], [-120.02688127769018, 34.681520761856035], [-120.02565480881036, 34.686067202877275], [-120.02557636256647, 34.68749492328606], [-120.02540359502339, 34.69063897254925], [-120.02698181220869, 34.691998736361825], [-120.02707411605091, 34.704552662731395], [-120.02711070780717, 34.71876004647024], [-120.02728384103979, 34.719704576193706], [-120.02488659066623, 34.72151568825152], [-120.01860679260076, 34.72166938674092], [-120.01819018507503, 34.721863965265676], [-120.01794880316505, 34.72197670352912], [-120.0181373446802, 34.723016839560394], [-120.0181601976407, 34.72314289819512], [-120.01268426806213, 34.72738510493605], [-120.01248884292058, 34.72753649045302], [-120.01243858361981, 34.72813618399153], [-120.01175444547289, 34.729442988434734], [-120.01960069899336, 34.735545259144054], [-120.02895215128893, 34.742804281371775], [-120.02912625895728, 34.742742063707205], [-120.02981138599067, 34.7427657274346], [-120.03090839289258, 34.74269810021536], [-120.03202999082784, 34.74302707415178], [-120.03311348576628, 34.74237415359347], [-120.03333602264894, 34.74317636970352], [-120.03380537304476, 34.74313736951284], [-120.03475265629952, 34.743324641364374], [-120.03595506984117, 34.74345547658775], [-120.03733930865612, 34.742861728096315], [-120.04041123986089, 34.74342268352134]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 5874.21, &quot;Name&quot;: &quot;Sedgwick Reserve&quot;, &quot;__folium_color&quot;: &quot;#ffed6f&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.357702146634, 34.574184013493], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.473673757175, 34.5698725745769], [-120.474268898347, 34.5700040405158], [-120.474600420056, 34.5701232448023], [-120.474945113745, 34.5701935127921], [-120.475165291462, 34.5701956555251], [-120.475829839562, 34.5703522163797], [-120.476126837274, 34.570484771851], [-120.476367652784, 34.5705644460913], [-120.476767257077, 34.5707922837598], [-120.476956580558, 34.570862527191], [-120.47733898406, 34.5709833977747], [-120.477599964183, 34.5710588660795], [-120.47817850394, 34.5712261617217], [-120.481738523721, 34.5722400097051], [-120.486565296247, 34.5739613611966], [-120.487336678587, 34.5741731203603], [-120.487458438702, 34.574184013493], [-120.487792444198, 34.5688007459224], [-120.488221077539, 34.5644728137622], [-120.488428943236, 34.5614911377697], [-120.489191659322, 34.5505070706799], [-120.489267306881, 34.5494175061616], [-120.48991932846, 34.5400250245606], [-120.49155701063, 34.5153077705207], [-120.490914956929, 34.5153470831478], [-120.490858485216, 34.515352131213], [-120.490409558688, 34.5153020000506], [-120.490331954646, 34.514724729607], [-120.490604744291, 34.5144394345523], [-120.491028935108, 34.5144253018181], [-120.49161675957, 34.514405716414], [-120.491877588824, 34.5117997226576], [-120.492389392466, 34.5116813855763], [-120.492404682661, 34.5114140472664], [-120.492268448668, 34.5107907923188], [-120.493188821525, 34.5110243541547], [-120.493970350972, 34.5109179461089], [-120.495068521249, 34.5108643502897], [-120.495038659034, 34.5115200674382], [-120.495039163031, 34.5120929218963], [-120.495984242865, 34.5125697378642], [-120.498181346587, 34.5130307621533], [-120.498123390052, 34.5123369936108], [-120.498095764042, 34.5120062836795], [-120.497985803758, 34.5106899533691], [-120.498090845087, 34.5106889410481], [-120.498303942318, 34.5105477020061], [-120.498625059495, 34.5103348662614], [-120.498762182787, 34.5102439802922], [-120.498871329196, 34.510171638186], [-120.498894553595, 34.5100221260595], [-120.498923852075, 34.509873347969], [-120.498959195165, 34.5097254716365], [-120.499000538146, 34.5095786657504], [-120.499059573485, 34.509374940859], [-120.499147206376, 34.5090423929844], [-120.499202559112, 34.508820276959], [-120.499239734895, 34.5085488741828], [-120.499250794996, 34.5083486531177], [-120.499254083819, 34.5081482414938], [-120.499249597285, 34.507947844773], [-120.499237340047, 34.5077476710807], [-120.499217325463, 34.5075479267013], [-120.499189573417, 34.507348816988], [-120.499154112519, 34.5071505481559], [-120.499289029747, 34.5071287386186], [-120.499233464986, 34.5069405231472], [-120.499221872857, 34.5069012600297], [-120.499063837923, 34.5064646326826], [-120.498932996477, 34.5061570457899], [-120.498818408853, 34.5058720119715], [-120.498623315983, 34.5054732140658], [-120.498181088135, 34.5047088104681], [-120.498023587755, 34.5044365643444], [-120.497580505627, 34.503737414272], [-120.496127891706, 34.501135679845], [-120.496240754909, 34.5009613084681], [-120.498011374504, 34.5005639046725], [-120.496306010257, 34.4955043966029], [-120.495431360006, 34.4947586359758], [-120.49356932046, 34.4945977079514], [-120.490977259782, 34.4920943138676], [-120.490423013336, 34.4903539674059], [-120.490172553336, 34.4895674891384], [-120.489164684652, 34.4881510121425], [-120.488200969833, 34.4870440781173], [-120.4853270001, 34.4847528928572], [-120.482819733794, 34.4836013402195], [-120.481681765562, 34.4824480217754], [-120.480701626145, 34.481628318715], [-120.478441632665, 34.4797381663922], [-120.47555283623, 34.4736303146603], [-120.474105463343, 34.4681500043105], [-120.473110842247, 34.4582269564998], [-120.473291886157, 34.4579641923204], [-120.473033475491, 34.4576316197362], [-120.472465884553, 34.454125694944], [-120.471356238116, 34.4532217783727], [-120.471167899797, 34.4530029200902], [-120.471109787149, 34.4528695275691], [-120.471051009323, 34.4527137192015], [-120.470927808689, 34.4523696044615], [-120.470671353503, 34.4520348496189], [-120.470471318945, 34.4516461693752], [-120.470385940596, 34.4508530206709], [-120.470123969058, 34.4504283806063], [-120.470758833753, 34.4500416825379], [-120.471181960124, 34.4497839510985], [-120.471229059664, 34.4495184686253], [-120.471391697591, 34.449055697612], [-120.471832931443, 34.4488269769211], [-120.471729365609, 34.4486278295873], [-120.471769946125, 34.4482690466694], [-120.471601486969, 34.4482642285405], [-120.471060999993, 34.4485040526842], [-120.470621018159, 34.4483090603018], [-120.470211336098, 34.4489511927851], [-120.470026476405, 34.4492427757797], [-120.469515037907, 34.4494160416012], [-120.469387911847, 34.4496920110722], [-120.468461511874, 34.4498741956832], [-120.46792536886, 34.4492790586956], [-120.467628986712, 34.4489500597483], [-120.466905240826, 34.4492565098178], [-120.465943966248, 34.4496195672036], [-120.464655193256, 34.4493073949995], [-120.463223894796, 34.4489163034687], [-120.462337772009, 34.448543633795], [-120.462042398192, 34.4482141712519], [-120.461744849481, 34.4478822790921], [-120.460304664703, 34.4478302116895], [-120.459417799422, 34.4474569508048], [-120.458732212012, 34.4468598517634], [-120.458633656842, 34.4466090206738], [-120.458568737608, 34.4465524767442], [-120.458539199729, 34.446368614307], [-120.458348529198, 34.4458833332416], [-120.458437544011, 34.4457358718019], [-120.458793232881, 34.4451463663297], [-120.458580378696, 34.4446115419742], [-120.457432245138, 34.4448826048084], [-120.456587131457, 34.4444478258254], [-120.456509992418, 34.4436265031584], [-120.456251349387, 34.4433206638602], [-120.454226425466, 34.4430624112946], [-120.452653913344, 34.4422979925537], [-120.451946239776, 34.4428771121843], [-120.452723807357, 34.4439614575846], [-120.452662645674, 34.4446677630137], [-120.45299172018, 34.4452437279766], [-120.452378457834, 34.4463626224092], [-120.451337168761, 34.4473187915795], [-120.450815849917, 34.4475094506155], [-120.449452910472, 34.4480707744484], [-120.447853024737, 34.4485992714863], [-120.44651085367, 34.4489421125084], [-120.446197814568, 34.4490987913058], [-120.445933656964, 34.4493747732761], [-120.445690728059, 34.4497555826001], [-120.445664821648, 34.4501094624365], [-120.445527423023, 34.4503753710323], [-120.445067684528, 34.4507906225475], [-120.444091370672, 34.4512313167406], [-120.442577243774, 34.451592613765], [-120.441686382297, 34.4516926907227], [-120.441166637934, 34.4517131747041], [-120.439587673205, 34.4515143770564], [-120.438752019035, 34.4514910820401], [-120.438144977525, 34.4514230890755], [-120.437709009405, 34.4514118015094], [-120.437216386959, 34.4515319659313], [-120.435667778514, 34.4515430183671], [-120.433915709264, 34.4512173076069], [-120.433511977675, 34.4512159591047], [-120.432471559705, 34.4510758598459], [-120.431694041238, 34.4509711547898], [-120.430274981666, 34.4506354702667], [-120.429709877218, 34.4505698414206], [-120.427587364016, 34.4503233179728], [-120.426876996484, 34.4501715463065], [-120.426573549182, 34.4501067116115], [-120.426252977703, 34.4500382182339], [-120.426069043101, 34.4499828397236], [-120.425305471374, 34.4498825737903], [-120.424686149467, 34.4498427536747], [-120.424093665868, 34.449750436401], [-120.42369541987, 34.4497960027391], [-120.422983491614, 34.4497472263523], [-120.422578813789, 34.4498377637825], [-120.422318659693, 34.4498616485717], [-120.42166000293, 34.449948737694], [-120.421170073867, 34.4500761754989], [-120.420347271565, 34.4504210764452], [-120.419873540428, 34.4507205520857], [-120.419606490998, 34.4509742238109], [-120.419461252804, 34.4512224611556], [-120.41938000696, 34.451458347596], [-120.419247384212, 34.4517429451309], [-120.419092122298, 34.4520046495873], [-120.418732145913, 34.4523178169448], [-120.418551892974, 34.4526816394167], [-120.418130582665, 34.4530465606527], [-120.417327488518, 34.453337695674], [-120.417002568518, 34.4533290902482], [-120.416815715888, 34.4534425426647], [-120.416424365124, 34.4535355947168], [-120.416421240814, 34.4535684660067], [-120.416386822882, 34.4539302025903], [-120.415253324658, 34.4658423090285], [-120.415203159248, 34.4663696083867], [-120.414631607579, 34.4723787160223], [-120.414212857113, 34.4767808450416], [-120.413944433307, 34.479602343388], [-120.413572918172, 34.4835074657814], [-120.412758369169, 34.4920677898374], [-120.412631823749, 34.4933975958215], [-120.407916577951, 34.4935100590974], [-120.402751700365, 34.4936316954858], [-120.401901835879, 34.4936516876257], [-120.397238699848, 34.493748887132], [-120.39273691307, 34.4938674321066], [-120.392352081229, 34.4938750793525], [-120.384896714585, 34.4940327862872], [-120.379993579422, 34.4941362584553], [-120.377839650906, 34.4941844453204], [-120.375991353319, 34.4952713912298], [-120.367965449605, 34.4999906114074], [-120.36774377502, 34.5001209379492], [-120.367258680304, 34.5001285638213], [-120.359126424738, 34.5002522419618], [-120.357702146634, 34.5032125420973], [-120.361217526605, 34.5032709808622], [-120.362496951952, 34.5049436060675], [-120.363440873389, 34.5054831944267], [-120.364018740336, 34.5077227097778], [-120.36332904295, 34.5097295561369], [-120.365031422912, 34.512252712451], [-120.364823694436, 34.5132242917346], [-120.365451937221, 34.5139480412655], [-120.365912887008, 34.5150702730013], [-120.366075878921, 34.5151302783262], [-120.367480358202, 34.5152657277682], [-120.372391160666, 34.5151371671737], [-120.374779134133, 34.5169819151248], [-120.375285265406, 34.5190637237547], [-120.375991611003, 34.5200795699009], [-120.376052771394, 34.5201675308613], [-120.375991612848, 34.520312157324], [-120.375825956212, 34.5207038871999], [-120.375371804881, 34.521710699293], [-120.376007023441, 34.5220722562213], [-120.376074413575, 34.5220940649509], [-120.379466799792, 34.5231916669648], [-120.381006658897, 34.5232676428505], [-120.38092307914, 34.5223796673316], [-120.381034098714, 34.5224374368346], [-120.381499443479, 34.5224710672393], [-120.382046494517, 34.5225665382582], [-120.382515496285, 34.5227091531803], [-120.383152184578, 34.5231667974061], [-120.383582357008, 34.5229531980577], [-120.383939000798, 34.5230580496765], [-120.384237198508, 34.5236258124823], [-120.38483672678, 34.523690302715], [-120.385028538973, 34.5237824405921], [-120.385133055655, 34.5243014906451], [-120.385260356192, 34.5246971293101], [-120.385664797403, 34.5247741292164], [-120.385915594467, 34.5250083704182], [-120.386574598676, 34.5256794109736], [-120.387111529327, 34.5257416314091], [-120.38773024861, 34.5260540412035], [-120.388022004063, 34.5262971539976], [-120.388676419447, 34.5264054084611], [-120.389529073335, 34.5265464525374], [-120.390504185866, 34.526640802745], [-120.391009207089, 34.5268431739642], [-120.391005721786, 34.5267264247092], [-120.391437325341, 34.5266492011179], [-120.391967696094, 34.5267829930735], [-120.393598177772, 34.5279179871388], [-120.394278999323, 34.5281045152003], [-120.395653188293, 34.5280785241694], [-120.396858599886, 34.5283576586532], [-120.397527577687, 34.5283971605779], [-120.398163868095, 34.5282842450376], [-120.398358239519, 34.5275018086042], [-120.399457794637, 34.5296274952515], [-120.402517701634, 34.5306632925699], [-120.404956161772, 34.531969355796], [-120.40789835488, 34.5352810789159], [-120.410703648928, 34.5371664852474], [-120.409762714298, 34.5407936959614], [-120.407431728691, 34.5416454409844], [-120.407227166948, 34.5419090188626], [-120.406306210521, 34.543079851039], [-120.406944456954, 34.5441272876299], [-120.407522149604, 34.5456565779677], [-120.406954902755, 34.5465708190505], [-120.408105884287, 34.5471715234752], [-120.412261839527, 34.5465707765058], [-120.413848941698, 34.5465817557597], [-120.416997571025, 34.5466034809769], [-120.420464462939, 34.5466273070577], [-120.423568318481, 34.5453059371054], [-120.425671437831, 34.5457077935336], [-120.429380659739, 34.5470565617633], [-120.430824990401, 34.5478858249855], [-120.432308362638, 34.5487374678597], [-120.430068074025, 34.5557487591411], [-120.430279946032, 34.5590111176329], [-120.432859692109, 34.5591264238944], [-120.434094197464, 34.5597121193747], [-120.43569484508, 34.559997118885], [-120.438418856458, 34.5594295723898], [-120.439090381371, 34.5593398374361], [-120.440824185975, 34.5596621084705], [-120.441772170159, 34.5599314010404], [-120.44634239648, 34.5617714738772], [-120.449838762706, 34.5627923451978], [-120.450674169161, 34.5631521959599], [-120.451140845572, 34.5635020140722], [-120.452148375883, 34.564463817018], [-120.455352153541, 34.5644374351165], [-120.456989566593, 34.5644071417117], [-120.458123596772, 34.5653783565248], [-120.459283206652, 34.565609708385], [-120.459998574452, 34.5669259718166], [-120.460969801901, 34.5675287882282], [-120.461670716271, 34.5676146889461], [-120.46336962219, 34.568922931321], [-120.465191204463, 34.570325572233], [-120.465566315188, 34.5702263782914], [-120.466455319658, 34.5699912928409], [-120.467503319101, 34.5699493585098], [-120.46821518151, 34.5699452256349], [-120.469612717659, 34.5698961713165], [-120.470564669519, 34.5698064646454], [-120.470932506464, 34.569834087755], [-120.471305184293, 34.5698172428706], [-120.47175025689, 34.569738163534], [-120.472009329261, 34.5697256920336], [-120.472274479659, 34.569749151624], [-120.473033797364, 34.5699056034398], [-120.473321205161, 34.5698689443084], [-120.473673757175, 34.5698725745769]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 24458.6153971, &quot;Name&quot;: &quot;Dangermond Preserve&quot;, &quot;__folium_color&quot;: &quot;#8dd3c7&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_835882390e28817de65a700af39b1975.bindTooltip(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);
    
    let handleObject = feature=&gt;typeof(feature)==&#x27;object&#x27; ? JSON.stringify(feature) : feature;
    let fields = [&quot;Name&quot;, &quot;Acreage&quot;];
    let aliases = [&quot;Name&quot;, &quot;Acreage&quot;];
    let table = &#x27;&lt;table&gt;&#x27; +
        String(
        fields.map(
        (v,i)=&gt;
        `&lt;tr&gt;
            &lt;th&gt;${aliases[i]}&lt;/th&gt;
            
            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;
        &lt;/tr&gt;`).join(&#x27;&#x27;))
    +&#x27;&lt;/table&gt;&#x27;;
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
    geo_json_835882390e28817de65a700af39b1975.bindPopup(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);
    
    let handleObject = feature=&gt;typeof(feature)==&#x27;object&#x27; ? JSON.stringify(feature) : feature;
    let fields = [&quot;Name&quot;, &quot;Acreage&quot;];
    let aliases = [&quot;Name&quot;, &quot;Acreage&quot;];
    let table = &#x27;&lt;table&gt;&#x27; +
        String(
        fields.map(
        (v,i)=&gt;
        `&lt;tr&gt;
            &lt;th&gt;${aliases[i].toLocaleString()}&lt;/th&gt;
            
            &lt;td&gt;${handleObject(layer.feature.properties[v]).toLocaleString()}&lt;/td&gt;
        &lt;/tr&gt;`).join(&#x27;&#x27;))
    +&#x27;&lt;/table&gt;&#x27;;
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumpopup&quot;});
                     
    
            geo_json_835882390e28817de65a700af39b1975.addTo(map_67adf28a1aeef1643593c965021cd60f);
        
    
            var layer_control_bc78bf4a67ffb556e0718289c319b99b_layers = {
                base_layers : {
                    &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot; : tile_layer_38c24c30180ca803ca473d019620de1e,
                },
                overlays :  {
                    &quot;bounding_box&quot; : geo_json_efc714008e38180c66829e6168b8ceb5,
                    &quot;Regions of Interest&quot; : geo_json_835882390e28817de65a700af39b1975,
                },
            };
            let layer_control_bc78bf4a67ffb556e0718289c319b99b = L.control.layers(
                layer_control_bc78bf4a67ffb556e0718289c319b99b_layers.base_layers,
                layer_control_bc78bf4a67ffb556e0718289c319b99b_layers.overlays,
                {&quot;autoZIndex&quot;: true, &quot;collapsed&quot;: true, &quot;position&quot;: &quot;topright&quot;}
            ).addTo(map_67adf28a1aeef1643593c965021cd60f);

        
    
            map_67adf28a1aeef1643593c965021cd60f.fitBounds(
                [[34.4422979925537, -120.499289029747], [34.743985733609556, -120.01175444547289]],
                {}
            );
        
&lt;/script&gt;
&lt;/html&gt;" width="750px" height="375px"style="border:none !important;" "allowfullscreen" "webkitallowfullscreen" "mozallowfullscreen"></iframe></div></div>
</div>
<p>Above we can see our regions of interest (ROIs) and the exterior boundary polygon containing the ROIs that we opened. We can hover over different areas to see the name of each ROI.</p>
<p>Lastly, we need to convert our polygon to a list of coordinate pairs, so it will be accepted as a ‘polygon’ search parameter in <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code>, as it expects a list of coordinate pairs in a counterclockwise order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set ROI as list of exterior polygon vertices as coordinate pairs</span>
<span class="n">roi</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">roi_poly</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="define-collections-of-interest">
<h3>2.2 Define Collections of Interest<a class="headerlink" href="#define-collections-of-interest" title="Link to this heading">#</a></h3>
<p>We need to specify which products we want to search for. The best way to do this is using their concept-id. As mentioned above, we will conduct our search using the EMIT Level 2A Reflectance (EMITL2ARFL) and ECOSTRESS Level 2 Tiled Land Surface Temperature and Emissivity (ECO_L2T_LSTE). We can do some quick collection queries using <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> to retrieve the concept-id for each dataset.</p>
<blockquote>
<div><p>Note: Here we use the Tiled ECOSTRESS LSTE Product. This will also work with the gridded LSTE and the swath; however, the swath product does not have a browse image for the visualization in section 4 and will require additional processing for subsequent analysis.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># EMIT Collection Query</span>
<span class="n">emit_collection_query</span> <span class="o">=</span> <span class="n">earthaccess</span><span class="o">.</span><span class="n">collection_query</span><span class="p">()</span><span class="o">.</span><span class="n">keyword</span><span class="p">(</span><span class="s1">&#39;EMIT L2A Reflectance&#39;</span><span class="p">)</span>
<span class="n">emit_collection_query</span><span class="o">.</span><span class="n">fields</span><span class="p">([</span><span class="s1">&#39;ShortName&#39;</span><span class="p">,</span><span class="s1">&#39;EntryTitle&#39;</span><span class="p">,</span><span class="s1">&#39;Version&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{
   &quot;meta&quot;: {
     &quot;concept-id&quot;: &quot;C2408750690-LPCLOUD&quot;,
     &quot;granule-count&quot;: 80543,
     &quot;provider-id&quot;: &quot;LPCLOUD&quot;
   },
   &quot;umm&quot;: {
     &quot;ShortName&quot;: &quot;EMITL2ARFL&quot;,
     &quot;EntryTitle&quot;: &quot;EMIT L2A Estimated Surface Reflectance and Uncertainty and Masks 60 m V001&quot;,
     &quot;Version&quot;: &quot;001&quot;
   }
 }]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ECOSTRESS Collection Query</span>
<span class="n">eco_collection_query</span> <span class="o">=</span> <span class="n">earthaccess</span><span class="o">.</span><span class="n">collection_query</span><span class="p">()</span><span class="o">.</span><span class="n">keyword</span><span class="p">(</span><span class="s1">&#39;ECOSTRESS L2 Tiled LSTE&#39;</span><span class="p">)</span>
<span class="n">eco_collection_query</span><span class="o">.</span><span class="n">fields</span><span class="p">([</span><span class="s1">&#39;ShortName&#39;</span><span class="p">,</span><span class="s1">&#39;EntryTitle&#39;</span><span class="p">,</span><span class="s1">&#39;Version&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{
   &quot;meta&quot;: {
     &quot;concept-id&quot;: &quot;C2076090826-LPCLOUD&quot;,
     &quot;granule-count&quot;: 3133795,
     &quot;provider-id&quot;: &quot;LPCLOUD&quot;
   },
   &quot;umm&quot;: {
     &quot;ShortName&quot;: &quot;ECO_L2T_LSTE&quot;,
     &quot;EntryTitle&quot;: &quot;ECOSTRESS Tiled Land Surface Temperature and Emissivity Instantaneous L2 Global 70 m V002&quot;,
     &quot;Version&quot;: &quot;002&quot;
   }
 },
 {
   &quot;meta&quot;: {
     &quot;concept-id&quot;: &quot;C2204557047-LPDAAC_ECS&quot;,
     &quot;granule-count&quot;: 1761265,
     &quot;provider-id&quot;: &quot;LPDAAC_ECS&quot;
   },
   &quot;umm&quot;: {
     &quot;ShortName&quot;: &quot;ECO_L2T_LSTE&quot;,
     &quot;EntryTitle&quot;: &quot;ECOSTRESS Tiled Land Surface Temperature and Emissivity Instantaneous L2 Global 70 m V002&quot;,
     &quot;Version&quot;: &quot;002&quot;
   }
 },
 {
   &quot;meta&quot;: {
     &quot;concept-id&quot;: &quot;C2090073749-LPCLOUD&quot;,
     &quot;granule-count&quot;: 202814,
     &quot;provider-id&quot;: &quot;LPCLOUD&quot;
   },
   &quot;umm&quot;: {
     &quot;ShortName&quot;: &quot;ECO_L2T_STARS&quot;,
     &quot;EntryTitle&quot;: &quot;ECOSTRESS Tiled Ancillary NDVI and Albedo L2 Global 70 m V002&quot;,
     &quot;Version&quot;: &quot;002&quot;
   }
 }]
</pre></div>
</div>
</div>
</div>
<p>If your search returns multiple products, be sure to select the right concept-id For this example it will be the first one. We want to use the <code class="docutils literal notranslate"><span class="pre">LPCLOUD</span></code> ECOSTRESS Tiled Land Surface Temperature and Emissivity (concept-id: “C2076090826-LPCLOUD”). Create a list of these concept-ids for our data search.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Data Collections for our search</span>
<span class="n">concept_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;C2408750690-LPCLOUD&#39;</span><span class="p">,</span> <span class="s1">&#39;C2076090826-LPCLOUD&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="define-date-range">
<h3>2.3 Define Date Range<a class="headerlink" href="#define-date-range" title="Link to this heading">#</a></h3>
<p>For our date range, we’ll look at data collected between January and October 2023. The <code class="docutils literal notranslate"><span class="pre">date_range</span></code> can be specified as a pair of dates, start and end (up to, not including).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define Date Range</span>
<span class="n">date_range</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;2023-01-01&#39;</span><span class="p">,</span><span class="s1">&#39;2023-11-01&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="searching">
<h3>2.4 Searching<a class="headerlink" href="#searching" title="Link to this heading">#</a></h3>
<p>Submit a query using <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">earthaccess</span><span class="o">.</span><span class="n">search_data</span><span class="p">(</span>
    <span class="n">concept_id</span><span class="o">=</span><span class="n">concept_ids</span><span class="p">,</span>
    <span class="n">polygon</span><span class="o">=</span><span class="n">roi</span><span class="p">,</span>
    <span class="n">temporal</span><span class="o">=</span><span class="n">date_range</span><span class="p">,</span>
    <span class="n">count</span><span class="o">=</span><span class="mi">500</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Granules found: 323
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="organizing-and-filtering-results">
<h2>3. Organizing and Filtering Results<a class="headerlink" href="#organizing-and-filtering-results" title="Link to this heading">#</a></h2>
<p>As we can see from above, the results object contains a list of objects with metadata and links. We can convert this to a more readable format, a dataframe. In addition, we can make it a geodataframe by taking the spatial metadata and creating a shapely polygon representing the spatial coverage, and further customize which information we want to use from other metadata fields.</p>
<p>First, we define some functions to help us create a shapely object for our geodataframe, and retrieve the specific browse image URLs that we want. By default, the browse image selected by <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> is the first one in the list, but the ECO_L2_LSTE has several browse images, and we want to make sure we retrieve the <code class="docutils literal notranslate"><span class="pre">png</span></code> file, which is a preview of the LSTE.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Function to create shapely polygon of spatial coverage</span>
<span class="k">def</span> <span class="nf">get_shapely_object</span><span class="p">(</span><span class="n">result</span><span class="p">:</span><span class="n">earthaccess</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">DataGranule</span><span class="p">):</span>
    <span class="c1"># Get Geometry Keys</span>
    <span class="n">geo</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;umm&#39;</span><span class="p">][</span><span class="s1">&#39;SpatialExtent&#39;</span><span class="p">][</span><span class="s1">&#39;HorizontalSpatialDomain&#39;</span><span class="p">][</span><span class="s1">&#39;Geometry&#39;</span><span class="p">]</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">if</span> <span class="s1">&#39;BoundingRectangles&#39;</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">bounding_rectangle</span> <span class="o">=</span> <span class="n">geo</span><span class="p">[</span><span class="s1">&#39;BoundingRectangles&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Create bbox tuple</span>
        <span class="n">bbox_coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounding_rectangle</span><span class="p">[</span><span class="s1">&#39;WestBoundingCoordinate&#39;</span><span class="p">],</span><span class="n">bounding_rectangle</span><span class="p">[</span><span class="s1">&#39;SouthBoundingCoordinate&#39;</span><span class="p">],</span>
                    <span class="n">bounding_rectangle</span><span class="p">[</span><span class="s1">&#39;EastBoundingCoordinate&#39;</span><span class="p">],</span><span class="n">bounding_rectangle</span><span class="p">[</span><span class="s1">&#39;NorthBoundingCoordinate&#39;</span><span class="p">])</span>
        <span class="c1"># Create shapely geometry from bbox</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="o">*</span><span class="n">bbox_coords</span><span class="p">,</span> <span class="n">ccw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;GPolygons&#39;</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">geo</span><span class="p">[</span><span class="s1">&#39;GPolygons&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;Boundary&#39;</span><span class="p">][</span><span class="s1">&#39;Points&#39;</span><span class="p">]</span>
        <span class="c1"># Create shapely geometry from polygons</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">([[</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;Longitude&#39;</span><span class="p">],</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;Latitude&#39;</span><span class="p">]]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Provided result does not contain bounding boxes/polygons or is incompatible.&#39;</span><span class="p">)</span>
    <span class="k">return</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># Retrieve png browse image if it exists or first jpg in list of urls</span>
<span class="k">def</span> <span class="nf">get_png</span><span class="p">(</span><span class="n">result</span><span class="p">:</span><span class="n">earthaccess</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">DataGranule</span><span class="p">):</span>
    <span class="n">https_links</span> <span class="o">=</span> <span class="p">[</span><span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">dataviz_links</span><span class="p">()</span> <span class="k">if</span> <span class="s1">&#39;https&#39;</span> <span class="ow">in</span> <span class="n">link</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">https_links</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">browse</span> <span class="o">=</span> <span class="n">https_links</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">https_links</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">browse</span> <span class="o">=</span> <span class="s1">&#39;no browse image&#39;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no browse imagery for </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;umm&#39;</span><span class="p">][</span><span class="s1">&#39;GranuleUR&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">browse</span> <span class="o">=</span> <span class="p">[</span><span class="n">png</span> <span class="k">for</span> <span class="n">png</span> <span class="ow">in</span> <span class="n">https_links</span> <span class="k">if</span> <span class="s1">&#39;.png&#39;</span> <span class="ow">in</span> <span class="n">png</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span><span class="p">(</span><span class="n">browse</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now that we have our functions we can create a dataframe, then calculate and add our shapely geometries to make a geodataframe. After that, add a column for our browse image urls and print the number of granules in our results, so we can monitor the quantity we  are working with a we winnow down to the data we want.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create Dataframe of Results Metadata</span>
<span class="n">results_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="c1"># Create shapely polygons for result</span>
<span class="n">geometries</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_shapely_object</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">index</span><span class="p">])</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">results_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()]</span>
<span class="c1"># Convert to GeoDataframe</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">results_df</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geometries</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="c1"># Remove results df, no longer needed</span>
<span class="k">del</span> <span class="n">results_df</span>
<span class="c1"># Add browse imagery links</span>
<span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;browse&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">get_png</span><span class="p">(</span><span class="n">granule</span><span class="p">)</span> <span class="k">for</span> <span class="n">granule</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
<span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;shortname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;umm&#39;</span><span class="p">][</span><span class="s1">&#39;CollectionReference&#39;</span><span class="p">][</span><span class="s1">&#39;ShortName&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
<span class="c1"># Preview GeoDataframe</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> granules total&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>323 granules total
</pre></div>
</div>
</div>
</div>
<p>Preview our geodataframe to get an idea what it looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>size</th>
      <th>meta.concept-type</th>
      <th>meta.concept-id</th>
      <th>meta.revision-id</th>
      <th>meta.native-id</th>
      <th>meta.collection-concept-id</th>
      <th>meta.provider-id</th>
      <th>meta.format</th>
      <th>meta.revision-date</th>
      <th>umm.TemporalExtent.RangeDateTime.BeginningDateTime</th>
      <th>...</th>
      <th>umm.Platforms</th>
      <th>umm.MetadataSpecification.URL</th>
      <th>umm.MetadataSpecification.Name</th>
      <th>umm.MetadataSpecification.Version</th>
      <th>umm.SpatialExtent.HorizontalSpatialDomain.Geometry.GPolygons</th>
      <th>umm.PGEVersionClass.PGEName</th>
      <th>umm.CloudCover</th>
      <th>geometry</th>
      <th>browse</th>
      <th>shortname</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2.496260</td>
      <td>granule</td>
      <td>G2581836170-LPCLOUD</td>
      <td>2</td>
      <td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
      <td>C2076090826-LPCLOUD</td>
      <td>LPCLOUD</td>
      <td>application/echo10+xml</td>
      <td>2024-01-20T15:57:11.266Z</td>
      <td>2023-01-01T15:52:48.650Z</td>
      <td>...</td>
      <td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
      <td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
      <td>UMM-G</td>
      <td>1.6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.292531</td>
      <td>granule</td>
      <td>G2586136519-LPCLOUD</td>
      <td>2</td>
      <td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
      <td>C2076090826-LPCLOUD</td>
      <td>LPCLOUD</td>
      <td>application/echo10+xml</td>
      <td>2024-01-20T17:35:56.995Z</td>
      <td>2023-01-03T07:43:30.510Z</td>
      <td>...</td>
      <td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
      <td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
      <td>UMM-G</td>
      <td>1.6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.495430</td>
      <td>granule</td>
      <td>G2586136993-LPCLOUD</td>
      <td>2</td>
      <td>ECOv002_L2T_LSTE_25486_006_11SKU_20230103T0744...</td>
      <td>C2076090826-LPCLOUD</td>
      <td>LPCLOUD</td>
      <td>application/echo10+xml</td>
      <td>2024-01-20T17:36:01.364Z</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>...</td>
      <td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
      <td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
      <td>UMM-G</td>
      <td>1.6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5.103070</td>
      <td>granule</td>
      <td>G2586137000-LPCLOUD</td>
      <td>2</td>
      <td>ECOv002_L2T_LSTE_25486_006_10SGD_20230103T0744...</td>
      <td>C2076090826-LPCLOUD</td>
      <td>LPCLOUD</td>
      <td>application/echo10+xml</td>
      <td>2024-01-20T17:36:08.168Z</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>...</td>
      <td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
      <td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
      <td>UMM-G</td>
      <td>1.6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1.160680</td>
      <td>granule</td>
      <td>G2591892077-LPCLOUD</td>
      <td>2</td>
      <td>ECOv002_L2T_LSTE_25547_005_11SKU_20230107T0607...</td>
      <td>C2076090826-LPCLOUD</td>
      <td>LPCLOUD</td>
      <td>application/echo10+xml</td>
      <td>2024-01-17T16:14:22.254Z</td>
      <td>2023-01-07T06:07:21.560Z</td>
      <td>...</td>
      <td>[{'ShortName': 'ISS', 'Instruments': [{'ShortN...</td>
      <td>https://cdn.earthdata.nasa.gov/umm/granule/v1.6.6</td>
      <td>UMM-G</td>
      <td>1.6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 35 columns</p>
</div></div></div>
</div>
<p>There are a lot of columns with data that is not relevant to our goal, so we can drop those. To do that, list the names of columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># List Column Names</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;size&#39;, &#39;meta.concept-type&#39;, &#39;meta.concept-id&#39;, &#39;meta.revision-id&#39;,
       &#39;meta.native-id&#39;, &#39;meta.collection-concept-id&#39;, &#39;meta.provider-id&#39;,
       &#39;meta.format&#39;, &#39;meta.revision-date&#39;,
       &#39;umm.TemporalExtent.RangeDateTime.BeginningDateTime&#39;,
       &#39;umm.TemporalExtent.RangeDateTime.EndingDateTime&#39;,
       &#39;umm.OrbitCalculatedSpatialDomains&#39;, &#39;umm.GranuleUR&#39;,
       &#39;umm.AdditionalAttributes&#39;, &#39;umm.MeasuredParameters&#39;,
       &#39;umm.SpatialExtent.HorizontalSpatialDomain.Geometry.BoundingRectangles&#39;,
       &#39;umm.ProviderDates&#39;, &#39;umm.CollectionReference.ShortName&#39;,
       &#39;umm.CollectionReference.Version&#39;, &#39;umm.PGEVersionClass.PGEVersion&#39;,
       &#39;umm.RelatedUrls&#39;, &#39;umm.DataGranule.DayNightFlag&#39;,
       &#39;umm.DataGranule.Identifiers&#39;, &#39;umm.DataGranule.ProductionDateTime&#39;,
       &#39;umm.DataGranule.ArchiveAndDistributionInformation&#39;, &#39;umm.Platforms&#39;,
       &#39;umm.MetadataSpecification.URL&#39;, &#39;umm.MetadataSpecification.Name&#39;,
       &#39;umm.MetadataSpecification.Version&#39;,
       &#39;umm.SpatialExtent.HorizontalSpatialDomain.Geometry.GPolygons&#39;,
       &#39;umm.PGEVersionClass.PGEName&#39;, &#39;umm.CloudCover&#39;, &#39;geometry&#39;, &#39;browse&#39;,
       &#39;shortname&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Now create a list of columns to keep and use it to filter the dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a list of columns to keep</span>
<span class="n">keep_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;meta.concept-id&#39;</span><span class="p">,</span><span class="s1">&#39;meta.native-id&#39;</span><span class="p">,</span> <span class="s1">&#39;umm.TemporalExtent.RangeDateTime.BeginningDateTime&#39;</span><span class="p">,</span><span class="s1">&#39;umm.TemporalExtent.RangeDateTime.EndingDateTime&#39;</span><span class="p">,</span><span class="s1">&#39;umm.CloudCover&#39;</span><span class="p">,</span><span class="s1">&#39;umm.DataGranule.DayNightFlag&#39;</span><span class="p">,</span><span class="s1">&#39;geometry&#39;</span><span class="p">,</span><span class="s1">&#39;browse&#39;</span><span class="p">,</span> <span class="s1">&#39;shortname&#39;</span><span class="p">]</span>
<span class="c1"># Remove unneeded columns</span>
<span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">keep_cols</span><span class="p">)]</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>meta.concept-id</th>
      <th>meta.native-id</th>
      <th>umm.TemporalExtent.RangeDateTime.BeginningDateTime</th>
      <th>umm.TemporalExtent.RangeDateTime.EndingDateTime</th>
      <th>umm.DataGranule.DayNightFlag</th>
      <th>umm.CloudCover</th>
      <th>geometry</th>
      <th>browse</th>
      <th>shortname</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>G2581836170-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
      <td>2023-01-01T15:52:48.650Z</td>
      <td>2023-01-01T15:53:40.620Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>G2586136519-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
      <td>2023-01-03T07:43:30.510Z</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>2</th>
      <td>G2586136993-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25486_006_11SKU_20230103T0744...</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>2023-01-03T07:45:14.450Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>3</th>
      <td>G2586137000-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25486_006_10SGD_20230103T0744...</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>2023-01-03T07:45:14.450Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>4</th>
      <td>G2591892077-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25547_005_11SKU_20230107T0607...</td>
      <td>2023-01-07T06:07:21.560Z</td>
      <td>2023-01-07T06:08:13.530Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This is looking better, but we can make it more readable by renaming our columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Rename some Columns</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;meta.concept-id&#39;</span><span class="p">:</span><span class="s1">&#39;concept_id&#39;</span><span class="p">,</span><span class="s1">&#39;meta.native-id&#39;</span><span class="p">:</span><span class="s1">&#39;granule&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;umm.TemporalExtent.RangeDateTime.BeginningDateTime&#39;</span><span class="p">:</span><span class="s1">&#39;start_datetime&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;umm.TemporalExtent.RangeDateTime.EndingDateTime&#39;</span><span class="p">:</span><span class="s1">&#39;end_datetime&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;umm.CloudCover&#39;</span><span class="p">:</span><span class="s1">&#39;cloud_cover&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;umm.DataGranule.DayNightFlag&#39;</span><span class="p">:</span><span class="s1">&#39;day_night&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>concept_id</th>
      <th>granule</th>
      <th>start_datetime</th>
      <th>end_datetime</th>
      <th>day_night</th>
      <th>cloud_cover</th>
      <th>geometry</th>
      <th>browse</th>
      <th>shortname</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>G2581836170-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25460_016_11SKU_20230101T1552...</td>
      <td>2023-01-01T15:52:48.650Z</td>
      <td>2023-01-01T15:53:40.620Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>G2586136519-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25486_005_10SGD_20230103T0743...</td>
      <td>2023-01-03T07:43:30.510Z</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>2</th>
      <td>G2586136993-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25486_006_11SKU_20230103T0744...</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>2023-01-03T07:45:14.450Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>3</th>
      <td>G2586137000-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25486_006_10SGD_20230103T0744...</td>
      <td>2023-01-03T07:44:22.480Z</td>
      <td>2023-01-03T07:45:14.450Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
    <tr>
      <th>4</th>
      <td>G2591892077-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_25547_005_11SKU_20230107T0607...</td>
      <td>2023-01-07T06:07:21.560Z</td>
      <td>2023-01-07T06:08:13.530Z</td>
      <td>Night</td>
      <td>NaN</td>
      <td>POLYGON ((-119.06582 34.21003, -119.06582 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<blockquote>
<div><p><strong>Note: If querying on-premises (not cloud) LP DAAC datasets, the <code class="docutils literal notranslate"><span class="pre">meta.concept-id</span></code> will not show as <code class="docutils literal notranslate"><span class="pre">xxxxxx-LPCLOUD</span></code>. For these datasets, the granule name can be retrieved from the <code class="docutils literal notranslate"><span class="pre">umm.DataGranule.Identifiers</span></code> column.</strong></p>
</div></blockquote>
<p>We can filter using the day/night flag as well, but this step will be unnecessary as we check to ensure all results from ECOSTRESS fall within an hour of resulting EMIT granules.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gdf = gdf[gdf[&#39;day_night&#39;].str.contains(&#39;Day&#39;)]</span>
</pre></div>
</div>
</div>
</div>
<p>Our first step toward filtering the datasets will be to add a column with a <code class="docutils literal notranslate"><span class="pre">datetime</span></code>.</p>
<blockquote>
<div><p><strong>You may have noticed that the date format is similar for ECOSTRESS and EMIT, but the ECOSTRESS data also includes fractional seconds. If using an different version of <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, you may need to drop the <code class="docutils literal notranslate"><span class="pre">format='ISO8601'</span></code>argument to the <code class="docutils literal notranslate"><span class="pre">to_datetime</span></code> function, as shown in the commented-out line.</strong></p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># gdf[&#39;datetime_obj&#39;] = pd.to_datetime(gdf[&#39;start_datetime&#39;]) # different pandas version</span>
<span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;datetime_obj&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;start_datetime&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;ISO8601&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can roughly visualize the quantity of results by month at our location using a histogram with 8 bins (Jan - Oct).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;datetime_obj&#39;</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s1">&#39;shortname&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&lt;Axes: title={&#39;center&#39;: &#39;ECO_L2T_LSTE&#39;}&gt;,
       &lt;Axes: title={&#39;center&#39;: &#39;EMITL2ARFL&#39;}&gt;], dtype=object)
</pre></div>
</div>
<img alt="_images/b15f7326f0663297cd33145cb7181faafa6db98b175848b2efdae506a1830d0b.png" src="_images/b15f7326f0663297cd33145cb7181faafa6db98b175848b2efdae506a1830d0b.png" />
</div>
</div>
<p>Now we will separate the results into two dataframes, one for ECOTRESS and one for EMIT, and print the number of results for each so we can monitor how many granules we’re filtering.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Suppress Setting with Copy Warning - not applicable in this use case</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">chained_assignment</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># default=&#39;warn&#39;</span>

<span class="c1"># Split into two dataframes - ECO and EMIT</span>
<span class="n">eco_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;granule&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;ECO&#39;</span><span class="p">)]</span>
<span class="n">emit_gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="p">[</span><span class="n">gdf</span><span class="p">[</span><span class="s1">&#39;granule&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;EMIT&#39;</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; ECOSTRESS Granules: </span><span class="si">{</span><span class="n">eco_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> EMIT Granules: </span><span class="si">{</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> ECOSTRESS Granules: 288 
 EMIT Granules: 35
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>concept_id</th>
      <th>granule</th>
      <th>start_datetime</th>
      <th>end_datetime</th>
      <th>day_night</th>
      <th>cloud_cover</th>
      <th>geometry</th>
      <th>browse</th>
      <th>shortname</th>
      <th>datetime_obj</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>31</th>
      <td>G2623634492-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230129T211308_2302914_003</td>
      <td>2023-01-29T21:13:08Z</td>
      <td>2023-01-29T21:13:20Z</td>
      <td>Day</td>
      <td>96.0</td>
      <td>POLYGON ((-120.29004 35.49324, -121.08087 34.8...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-01-29 21:13:08+00:00</td>
    </tr>
    <tr>
      <th>53</th>
      <td>G2631040813-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230219T202939_2305013_002</td>
      <td>2023-02-19T20:29:39Z</td>
      <td>2023-02-19T20:29:51Z</td>
      <td>Day</td>
      <td>47.0</td>
      <td>POLYGON ((-120.70791 35.54348, -121.19894 34.9...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-02-19 20:29:39+00:00</td>
    </tr>
    <tr>
      <th>56</th>
      <td>G2631045418-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230219T202951_2305013_003</td>
      <td>2023-02-19T20:29:51Z</td>
      <td>2023-02-19T20:30:14Z</td>
      <td>Day</td>
      <td>67.0</td>
      <td>POLYGON ((-120.04838 35.03646, -120.54523 34.4...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-02-19 20:29:51+00:00</td>
    </tr>
    <tr>
      <th>65</th>
      <td>G2631457332-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230223T185536_2305412_003</td>
      <td>2023-02-23T18:55:36Z</td>
      <td>2023-02-23T18:55:48Z</td>
      <td>Day</td>
      <td>98.0</td>
      <td>POLYGON ((-120.61175 35.58776, -121.10041 34.9...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-02-23 18:55:36+00:00</td>
    </tr>
    <tr>
      <th>66</th>
      <td>G2631458885-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230223T185548_2305412_004</td>
      <td>2023-02-23T18:55:48Z</td>
      <td>2023-02-23T18:56:00Z</td>
      <td>Day</td>
      <td>96.0</td>
      <td>POLYGON ((-119.95147 35.08163, -120.44685 34.4...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-02-23 18:55:48+00:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We still haven’t filtered the locations where EMIT and ECOSTRESS have data at the same spatial location and timeframe. The EMIT acquisition mask has been added to ECOSTRESS, so in most cases if EMIT is collecting data, so will ECOSTRESS, but there are edge cases where this is not true.  To do this we’ll use two filters to catch the edge-cases and provide an example that can be used with other datasets.</p>
<p>First, since EMIT has a smaller swath width, we can use a unary union of the spatial coverage present in our geodataframe to filter out ECOSTRESS granules that do not overlap with it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Subset ECOSTRESS Granules in Geodataframe by intersection with EMIT granules</span>
<span class="c1">## Create new column based on intersection with union of EMIT polygons.</span>
<span class="n">eco_gdf</span><span class="p">[</span><span class="s1">&#39;intersects&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">eco_gdf</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">unary_union</span><span class="p">)</span>
<span class="c1">## Apply subsetting</span>
<span class="n">eco_gdf</span> <span class="o">=</span> <span class="n">eco_gdf</span><span class="p">[</span><span class="n">eco_gdf</span><span class="p">[</span><span class="s1">&#39;intersects&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; ECOSTRESS Granules: </span><span class="si">{</span><span class="n">eco_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> EMIT Granules: </span><span class="si">{</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> ECOSTRESS Granules: 288 
 EMIT Granules: 35
</pre></div>
</div>
</div>
</div>
<p>In this instance, our results aren’t narrowed because our region of interest is smaller than a single EMIT scene. If the spatial ROI was very large, this would be much more unlikely.</p>
<p>Additionally, we want to make sure that data in our results are collected at the same time. For EMIT and ECOSTRESS, the EMIT acquisition mask has been added to the ECOSTRESS mask, meaning that if there is an EMIT scene, there should also be an ECOSTRESS scene acquired at the same time. In practice, however, the timestamps on the scenes can vary slightly. In order to capture this slight variability,  we need to use a range instead of a single timestamp to capture concurrent data. To do this, we’ll ensure all ECOSTRESS granule start times fall within 10 minutes of any of the EMIT granules in our results, and vice-versa.</p>
<p>Write a function to evaluate whether these <code class="docutils literal notranslate"><span class="pre">datetime</span></code> objects fall within 10 minutes of one another using the <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Function to Filter timestamps that do not fall within a time_delta of timestamps from the other acquisition time</span>
<span class="k">def</span> <span class="nf">concurrent_match</span><span class="p">(</span><span class="n">gdf_a</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">gdf_b</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">col_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">time_delta</span><span class="p">:</span><span class="n">timedelta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cross references dataframes containing a datetime object column and keeps rows in </span>
<span class="sd">    each that fall within the provided timedelta of the other. Acceptable time_delta examples:</span>
<span class="sd">    </span>
<span class="sd">    months=1</span>
<span class="sd">    days=1</span>
<span class="sd">    hours=1</span>
<span class="sd">    minutes=1</span>
<span class="sd">    seconds=1 </span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Match Timestamps from Dataframe A with Time-range of entries in Dataframe B</span>
    <span class="c1"># Create empty list</span>
    <span class="n">a_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Iterate results for product a based on index values</span>
    <span class="k">for</span> <span class="n">_n</span> <span class="ow">in</span> <span class="n">gdf_b</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">():</span>
        <span class="c1"># Find where product b is within the window of each product a result</span>
        <span class="n">a_matches</span> <span class="o">=</span> <span class="p">(</span><span class="n">gdf_a</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gdf_b</span><span class="p">[</span><span class="n">col_name</span><span class="p">][</span><span class="n">_n</span><span class="p">]</span><span class="o">-</span><span class="n">time_delta</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">gdf_a</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">gdf_b</span><span class="p">[</span><span class="n">col_name</span><span class="p">][</span><span class="n">_n</span><span class="p">]</span><span class="o">+</span><span class="n">time_delta</span><span class="p">)</span>
        <span class="c1"># Append list with values</span>
        <span class="n">a_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a_matches</span><span class="p">)</span>
    <span class="c1"># Match Timestamps from Dataframe B with Time-range of entries in Dataframe A</span>
    <span class="c1"># Create empty list</span>
    <span class="n">b_list</span> <span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">_m</span> <span class="ow">in</span> <span class="n">gdf_a</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">():</span>
        <span class="c1"># Find where product a is within the window of each product b result</span>
        <span class="n">b_matches</span> <span class="o">=</span> <span class="p">(</span><span class="n">gdf_b</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gdf_a</span><span class="p">[</span><span class="n">col_name</span><span class="p">][</span><span class="n">_m</span><span class="p">]</span><span class="o">-</span><span class="n">time_delta</span><span class="p">)</span> <span class="o">&amp;</span>  <span class="p">(</span><span class="n">gdf_b</span><span class="p">[</span><span class="n">col_name</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">gdf_a</span><span class="p">[</span><span class="n">col_name</span><span class="p">][</span><span class="n">_m</span><span class="p">]</span><span class="o">+</span><span class="n">time_delta</span><span class="p">)</span>
        <span class="c1"># Append list with values</span>
        <span class="n">b_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_matches</span><span class="p">)</span>
    <span class="c1"># Filter Original Dataframes by summing list of bools, 0 = outside of all time-ranges</span>
    <span class="n">a_filtered</span> <span class="o">=</span> <span class="n">gdf_a</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">a_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">b_filtered</span> <span class="o">=</span> <span class="n">gdf_b</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">b_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span><span class="p">(</span><span class="n">a_filtered</span><span class="p">,</span> <span class="n">b_filtered</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now run our function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eco_gdf</span><span class="p">,</span> <span class="n">emit_gdf</span> <span class="o">=</span> <span class="n">concurrent_match</span><span class="p">(</span><span class="n">eco_gdf</span><span class="p">,</span><span class="n">emit_gdf</span><span class="p">,</span> <span class="n">col_name</span><span class="o">=</span><span class="s1">&#39;datetime_obj&#39;</span><span class="p">,</span><span class="n">time_delta</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; ECOSTRESS Granules: </span><span class="si">{</span><span class="n">eco_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> EMIT Granules: </span><span class="si">{</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> ECOSTRESS Granules: 32 
 EMIT Granules: 22
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualizing-intersecting-coverage">
<h2>4. Visualizing Intersecting Coverage<a class="headerlink" href="#visualizing-intersecting-coverage" title="Link to this heading">#</a></h2>
<p>Now that we have geodataframes containing some concurrent data, we can visualize them on a map using <code class="docutils literal notranslate"><span class="pre">folium</span></code>. It’s often difficult to visualize a large time-series of scenes, so we’ve included an example in Appendix A1 on how to filter to a single day.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot Using Folium</span>

<span class="c1"># Create Figure and Select Background Tiles</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;750px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;375px&quot;</span><span class="p">)</span>
<span class="n">map1</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;https://mt1.google.com/vt/lyrs=y&amp;x=</span><span class="si">{x}</span><span class="s1">&amp;y=</span><span class="si">{y}</span><span class="s1">&amp;z=</span><span class="si">{z}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="s1">&#39;Google&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">map1</span><span class="p">)</span>

<span class="c1"># Plot STAC ECOSTRESS Results - note we must drop the datetime_obj columns for this to work</span>
<span class="n">eco_gdf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime_obj&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span>
    <span class="s2">&quot;granule&quot;</span><span class="p">,</span>
    <span class="n">categorical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;granule&quot;</span><span class="p">,</span>
        <span class="s2">&quot;start_datetime&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cloud_cover&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">popup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">style_kwds</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">fillOpacity</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ECOSTRESS&quot;</span><span class="p">,</span>
    <span class="n">m</span><span class="o">=</span><span class="n">map1</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Plot STAC EMITL2ARFL Results - note we must drop the datetime_obj columns for this to work</span>
<span class="n">emit_gdf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;datetime_obj&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span>
    <span class="s2">&quot;granule&quot;</span><span class="p">,</span>
    <span class="n">categorical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;granule&quot;</span><span class="p">,</span>
        <span class="s2">&quot;start_datetime&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cloud_cover&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">popup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">style_kwds</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">fillOpacity</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;EMIT&quot;</span><span class="p">,</span>
    <span class="n">m</span><span class="o">=</span><span class="n">map1</span><span class="p">,</span>
    <span class="n">legend</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># ECOSTRESS Browse Images - Comment out to remove</span>
<span class="k">for</span> <span class="n">_n</span> <span class="ow">in</span> <span class="n">eco_gdf</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">():</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">raster_layers</span><span class="o">.</span><span class="n">ImageOverlay</span><span class="p">(</span>
        <span class="n">image</span><span class="o">=</span><span class="n">eco_gdf</span><span class="p">[</span><span class="s1">&#39;browse&#39;</span><span class="p">][</span><span class="n">_n</span><span class="p">],</span>
        <span class="n">name</span><span class="o">=</span><span class="n">eco_gdf</span><span class="p">[</span><span class="s1">&#39;granule&#39;</span><span class="p">][</span><span class="n">_n</span><span class="p">],</span>
        <span class="n">bounds</span><span class="o">=</span><span class="p">[[</span><span class="n">eco_gdf</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;miny&#39;</span><span class="p">][</span><span class="n">_n</span><span class="p">],</span> <span class="n">eco_gdf</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;minx&#39;</span><span class="p">][</span><span class="n">_n</span><span class="p">]],</span> <span class="p">[</span><span class="n">eco_gdf</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;maxy&#39;</span><span class="p">][</span><span class="n">_n</span><span class="p">],</span> <span class="n">eco_gdf</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;maxx&#39;</span><span class="p">][</span><span class="n">_n</span><span class="p">]]],</span>
        <span class="n">interactive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">cross_origin</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span>
        <span class="n">zindex</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">map1</span><span class="p">)</span>

<span class="c1"># Plot Region of Interest</span>
<span class="n">polygon</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span>
    <span class="n">popup</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">style_kwds</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">fillOpacity</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Region of Interest&quot;</span><span class="p">,</span>
    <span class="n">m</span><span class="o">=</span><span class="n">map1</span>
<span class="p">)</span>

<span class="n">folium</span><span class="o">.</span><span class="n">GeoJson</span><span class="p">(</span><span class="n">roi_poly</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bounding_box&#39;</span><span class="p">,</span>
                <span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">map1</span><span class="p">)</span>

<span class="n">map1</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="n">convert_bounds</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">unary_union</span><span class="o">.</span><span class="n">bounds</span><span class="p">))</span>
<span class="n">map1</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">folium</span><span class="o">.</span><span class="n">LayerControl</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_ad43c167016ca3e79cbd2b9da9746b79 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
    
                    &lt;style&gt;
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;
            
    
                    &lt;style&gt;
                        .foliumpopup {
                            margin: auto;
                        }
                       .foliumpopup table{
                            margin: auto;
                        }
                        .foliumpopup tr{
                            text-align: left;
                        }
                        .foliumpopup th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;
            
    
                    &lt;style&gt;
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;
            
    
                    &lt;style&gt;
                        .foliumpopup {
                            margin: auto;
                        }
                       .foliumpopup table{
                            margin: auto;
                        }
                        .foliumpopup tr{
                            text-align: left;
                        }
                        .foliumpopup th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;
            
    
                &lt;style&gt;
                    .leaflet-image-layer {
                        /* old android/safari*/
                        image-rendering: -webkit-optimize-contrast;
                        image-rendering: crisp-edges; /* safari */
                        image-rendering: pixelated; /* chrome */
                        image-rendering: -moz-crisp-edges; /* firefox */
                        image-rendering: -o-crisp-edges; /* opera */
                        -ms-interpolation-mode: nearest-neighbor; /* ie */
                    }
                &lt;/style&gt;
            
    
                    &lt;style&gt;
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;
            
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_ad43c167016ca3e79cbd2b9da9746b79&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_ad43c167016ca3e79cbd2b9da9746b79 = L.map(
                &quot;map_ad43c167016ca3e79cbd2b9da9746b79&quot;,
                {
                    center: [0.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    zoom: 1,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_228334b2834cc3ad43220a11dad84298 = L.tileLayer(
                &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot;,
                {&quot;attribution&quot;: &quot;Google&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_228334b2834cc3ad43220a11dad84298.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
        function geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_styler(feature) {
            switch(feature.id) {
                case &quot;52&quot;: 
                    return {&quot;color&quot;: &quot;#1f77b4&quot;, &quot;fillColor&quot;: &quot;#1f77b4&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;54&quot;: 
                    return {&quot;color&quot;: &quot;#aec7e8&quot;, &quot;fillColor&quot;: &quot;#aec7e8&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;75&quot;: 
                    return {&quot;color&quot;: &quot;#ff7f0e&quot;, &quot;fillColor&quot;: &quot;#ff7f0e&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;76&quot;: 
                    return {&quot;color&quot;: &quot;#2ca02c&quot;, &quot;fillColor&quot;: &quot;#2ca02c&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;79&quot;: 
                    return {&quot;color&quot;: &quot;#98df8a&quot;, &quot;fillColor&quot;: &quot;#98df8a&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;119&quot;: 
                    return {&quot;color&quot;: &quot;#9467bd&quot;, &quot;fillColor&quot;: &quot;#9467bd&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;124&quot;: 
                    return {&quot;color&quot;: &quot;#8c564b&quot;, &quot;fillColor&quot;: &quot;#8c564b&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;153&quot;: 
                    return {&quot;color&quot;: &quot;#c49c94&quot;, &quot;fillColor&quot;: &quot;#c49c94&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;174&quot;: 
                    return {&quot;color&quot;: &quot;#e377c2&quot;, &quot;fillColor&quot;: &quot;#e377c2&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;180&quot;: 
                    return {&quot;color&quot;: &quot;#7f7f7f&quot;, &quot;fillColor&quot;: &quot;#7f7f7f&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;205&quot;: 
                    return {&quot;color&quot;: &quot;#c7c7c7&quot;, &quot;fillColor&quot;: &quot;#c7c7c7&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;293&quot;: 
                    return {&quot;color&quot;: &quot;#dbdb8d&quot;, &quot;fillColor&quot;: &quot;#dbdb8d&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;307&quot;: 
                    return {&quot;color&quot;: &quot;#17becf&quot;, &quot;fillColor&quot;: &quot;#17becf&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;316&quot;: 
                    return {&quot;color&quot;: &quot;#9edae5&quot;, &quot;fillColor&quot;: &quot;#9edae5&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                default:
                    return {&quot;color&quot;: &quot;#ff9896&quot;, &quot;fillColor&quot;: &quot;#ff9896&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
            }
        }
        function geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_f08b61e5e14082a1b73fc3ddf5645bd2.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_f08b61e5e14082a1b73fc3ddf5645bd2 = L.geoJson(null, {
                onEachFeature: geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_onEachFeature,
            
                style: geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_styler,
                pointToLayer: geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_pointToLayer,
        });

        function geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_add (data) {
            geo_json_f08b61e5e14082a1b73fc3ddf5645bd2
                .addData(data);
        }
            geo_json_f08b61e5e14082a1b73fc3ddf5645bd2_add({&quot;bbox&quot;: [-120.82892726886365, 34.207188, -119.598442, 35.223133], &quot;features&quot;: [{&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;52&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#1f77b4&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2627756987-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-19T20:29:43.280Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-02-19T20:28:51.310Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;54&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#aec7e8&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2627758024-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-19T20:30:35.250Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-02-19T20:29:43.280Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;75&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#ff7f0e&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2630582431-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-27T17:21:21.070Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-02-27T17:20:29.100Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.82892726886365, 34.20718855068355, -119.59844380403435, 35.223132916637724], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;76&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#2ca02c&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0711_02/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0711_02.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G3015778622-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-27T17:21:21.074Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0711_02&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-02-27T17:20:29.104Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;79&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#98df8a&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0710_01/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2630583457-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-27T17:22:13.040Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-02-27T17:21:21.070Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.82892726886365, 34.20718855068355, -119.59844380403435, 35.223132916637724], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;81&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#ff9896&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0711_02/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0711_02.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G3015772990-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-27T17:22:13.044Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0711_02&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-02-27T17:21:21.074Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;119&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#9467bd&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0710_01/ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2650963815-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-04-01T20:38:25.000Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-04-01T20:37:33.030Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;124&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#8c564b&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0710_01/ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2655983115-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-04-05T19:03:50.920Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-04-05T19:02:58.950Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;153&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#c49c94&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01/ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2710071138-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-04-22T19:59:28.710Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-04-22T19:58:36.740Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;174&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#e377c2&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0710_01/ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2715826603-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-05-28T22:04:53.660Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-05-28T22:04:01.690Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.828926, 34.207188, -119.598442, 35.223133], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.598442, 34.207188], [-119.598442, 35.223133], [-120.828926, 35.223133], [-120.828926, 34.207188], [-119.598442, 34.207188]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;180&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#7f7f7f&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0710_01/ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2715906073-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-06-01T20:27:11.740Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-06-01T20:26:19.770Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.82892726886365, 34.20718855068355, -119.59844380403435, 35.223132916637724], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;205&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#c7c7c7&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0710_01/ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2729123248-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-06-29T17:05:08.313Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-06-29T17:04:16.344Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.82892726886365, 34.20718855068355, -119.59844380403435, 35.223132916637724], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;293&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#dbdb8d&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0710_01/ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0710_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2772539755-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-09-23T23:21:56.408Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0710_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-09-23T23:21:04.439Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.82892726886365, 34.20718855068355, -119.59844380403435, 35.223132916637724], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;307&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#17becf&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0711_01/ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0711_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2792244801-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-10-14T22:40:28.865Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0711_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-10-14T22:39:36.895Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.82892726886365, 34.20718855068355, -119.59844380403435, 35.223132916637724], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.59844380403435, 34.20718855068355], [-119.59844380403435, 35.223132916637724], [-120.82892726886365, 35.223132916637724], [-120.82892726886365, 34.20718855068355], [-119.59844380403435, 34.20718855068355]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;316&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#9edae5&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0711_01/ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0711_01.png&quot;, &quot;cloud_cover&quot;: null, &quot;concept_id&quot;: &quot;G2790664680-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-10-18T21:03:00.111Z&quot;, &quot;granule&quot;: &quot;ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0711_01&quot;, &quot;intersects&quot;: true, &quot;shortname&quot;: &quot;ECO_L2T_LSTE&quot;, &quot;start_datetime&quot;: &quot;2023-10-18T21:02:08.141Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_f08b61e5e14082a1b73fc3ddf5645bd2.bindTooltip(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);
    
    let handleObject = feature=&gt;typeof(feature)==&#x27;object&#x27; ? JSON.stringify(feature) : feature;
    let fields = [&quot;granule&quot;, &quot;start_datetime&quot;, &quot;cloud_cover&quot;];
    let aliases = [&quot;granule&quot;, &quot;start_datetime&quot;, &quot;cloud_cover&quot;];
    let table = &#x27;&lt;table&gt;&#x27; +
        String(
        fields.map(
        (v,i)=&gt;
        `&lt;tr&gt;
            &lt;th&gt;${aliases[i]}&lt;/th&gt;
            
            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;
        &lt;/tr&gt;`).join(&#x27;&#x27;))
    +&#x27;&lt;/table&gt;&#x27;;
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
    geo_json_f08b61e5e14082a1b73fc3ddf5645bd2.bindPopup(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);
    
    let handleObject = feature=&gt;typeof(feature)==&#x27;object&#x27; ? JSON.stringify(feature) : feature;
    let fields = [&quot;concept_id&quot;, &quot;granule&quot;, &quot;start_datetime&quot;, &quot;end_datetime&quot;, &quot;day_night&quot;, &quot;cloud_cover&quot;, &quot;browse&quot;, &quot;shortname&quot;, &quot;intersects&quot;];
    let aliases = [&quot;concept_id&quot;, &quot;granule&quot;, &quot;start_datetime&quot;, &quot;end_datetime&quot;, &quot;day_night&quot;, &quot;cloud_cover&quot;, &quot;browse&quot;, &quot;shortname&quot;, &quot;intersects&quot;];
    let table = &#x27;&lt;table&gt;&#x27; +
        String(
        fields.map(
        (v,i)=&gt;
        `&lt;tr&gt;
            &lt;th&gt;${aliases[i].toLocaleString()}&lt;/th&gt;
            
            &lt;td&gt;${handleObject(layer.feature.properties[v]).toLocaleString()}&lt;/td&gt;
        &lt;/tr&gt;`).join(&#x27;&#x27;))
    +&#x27;&lt;/table&gt;&#x27;;
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumpopup&quot;});
                     
    
            geo_json_f08b61e5e14082a1b73fc3ddf5645bd2.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
        function geo_json_f6eeab443a76b9c7230c8239eaca257b_styler(feature) {
            switch(feature.id) {
                case &quot;53&quot;: 
                    return {&quot;color&quot;: &quot;#1f77b4&quot;, &quot;fillColor&quot;: &quot;#1f77b4&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;56&quot;: 
                    return {&quot;color&quot;: &quot;#aec7e8&quot;, &quot;fillColor&quot;: &quot;#aec7e8&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;121&quot;: 
                    return {&quot;color&quot;: &quot;#2ca02c&quot;, &quot;fillColor&quot;: &quot;#2ca02c&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;122&quot;: 
                    return {&quot;color&quot;: &quot;#98df8a&quot;, &quot;fillColor&quot;: &quot;#98df8a&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;125&quot;: 
                    return {&quot;color&quot;: &quot;#d62728&quot;, &quot;fillColor&quot;: &quot;#d62728&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;154&quot;: 
                    return {&quot;color&quot;: &quot;#9467bd&quot;, &quot;fillColor&quot;: &quot;#9467bd&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;177&quot;: 
                    return {&quot;color&quot;: &quot;#c5b0d5&quot;, &quot;fillColor&quot;: &quot;#c5b0d5&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;179&quot;: 
                    return {&quot;color&quot;: &quot;#8c564b&quot;, &quot;fillColor&quot;: &quot;#8c564b&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;207&quot;: 
                    return {&quot;color&quot;: &quot;#e377c2&quot;, &quot;fillColor&quot;: &quot;#e377c2&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;292&quot;: 
                    return {&quot;color&quot;: &quot;#f7b6d2&quot;, &quot;fillColor&quot;: &quot;#f7b6d2&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;295&quot;: 
                    return {&quot;color&quot;: &quot;#7f7f7f&quot;, &quot;fillColor&quot;: &quot;#7f7f7f&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;309&quot;: 
                    return {&quot;color&quot;: &quot;#bcbd22&quot;, &quot;fillColor&quot;: &quot;#bcbd22&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;310&quot;: 
                    return {&quot;color&quot;: &quot;#dbdb8d&quot;, &quot;fillColor&quot;: &quot;#dbdb8d&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;315&quot;: 
                    return {&quot;color&quot;: &quot;#17becf&quot;, &quot;fillColor&quot;: &quot;#17becf&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                case &quot;318&quot;: 
                    return {&quot;color&quot;: &quot;#9edae5&quot;, &quot;fillColor&quot;: &quot;#9edae5&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
                default:
                    return {&quot;color&quot;: &quot;#ff7f0e&quot;, &quot;fillColor&quot;: &quot;#ff7f0e&quot;, &quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
            }
        }
        function geo_json_f6eeab443a76b9c7230c8239eaca257b_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_f6eeab443a76b9c7230c8239eaca257b_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_f6eeab443a76b9c7230c8239eaca257b_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_f6eeab443a76b9c7230c8239eaca257b_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_f6eeab443a76b9c7230c8239eaca257b.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_f6eeab443a76b9c7230c8239eaca257b_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_f6eeab443a76b9c7230c8239eaca257b = L.geoJson(null, {
                onEachFeature: geo_json_f6eeab443a76b9c7230c8239eaca257b_onEachFeature,
            
                style: geo_json_f6eeab443a76b9c7230c8239eaca257b_styler,
                pointToLayer: geo_json_f6eeab443a76b9c7230c8239eaca257b_pointToLayer,
        });

        function geo_json_f6eeab443a76b9c7230c8239eaca257b_add (data) {
            geo_json_f6eeab443a76b9c7230c8239eaca257b
                .addData(data);
        }
            geo_json_f6eeab443a76b9c7230c8239eaca257b_add({&quot;bbox&quot;: [-121.32658386230469, 33.211692810058594, -118.7467269897461, 36.0649299621582], &quot;features&quot;: [{&quot;bbox&quot;: [-121.19893646240234, 34.362003326416016, -120.00106048583984, 35.54348373413086], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.7079086303711, 35.54348373413086], [-121.19893646240234, 34.90925979614258], [-120.4920883178711, 34.362003326416016], [-120.00106048583984, 34.9962272644043], [-120.7079086303711, 35.54348373413086]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;53&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#1f77b4&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_RFL_001_20230219T202939_2305013_002.png&quot;, &quot;cloud_cover&quot;: 47.0, &quot;concept_id&quot;: &quot;G2631040813-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-19T20:29:51Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230219T202939_2305013_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-02-19T20:29:39Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.54523468017578, 33.37880325317383, -118.7467269897461, 35.03645706176758], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.04837799072266, 35.03645706176758], [-120.54523468017578, 34.40815353393555], [-119.24358367919922, 33.37880325317383], [-118.7467269897461, 34.00710678100586], [-120.04837799072266, 35.03645706176758]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;56&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#aec7e8&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_RFL_001_20230219T202951_2305013_003.png&quot;, &quot;cloud_cover&quot;: 67.0, &quot;concept_id&quot;: &quot;G2631045418-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-19T20:30:14Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230219T202951_2305013_003&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-02-19T20:29:51Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-121.2174072265625, 34.65137481689453, -120.01828002929688, 35.831687927246094], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.73262023925781, 35.831687927246094], [-121.2174072265625, 35.196998596191406], [-120.50306701660156, 34.65137481689453], [-120.01828002929688, 35.28606414794922], [-120.73262023925781, 35.831687927246094]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;77&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#ff7f0e&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230227T172116_2305811_004/EMIT_L2A_RFL_001_20230227T172116_2305811_004.png&quot;, &quot;cloud_cover&quot;: 99.0, &quot;concept_id&quot;: &quot;G2631818088-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-02-27T17:21:28Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230227T172116_2305811_004&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-02-27T17:21:16Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.99247741699219, 33.660736083984375, -119.71609497070312, 34.906585693359375], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.21542358398438, 34.906585693359375], [-120.99247741699219, 34.28937530517578], [-120.49314880371094, 33.660736083984375], [-119.71609497070312, 34.27794647216797], [-120.21542358398438, 34.906585693359375]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;121&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#2ca02c&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230401T203751_2309114_002/EMIT_L2A_RFL_001_20230401T203751_2309114_002.png&quot;, &quot;cloud_cover&quot;: 80.0, &quot;concept_id&quot;: &quot;G2648965598-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-04-01T20:38:03Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230401T203751_2309114_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-04-01T20:37:51Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.34871673583984, 34.166805267333984, -119.0654067993164, 35.41507339477539], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.55792999267578, 35.41507339477539], [-120.34871673583984, 34.799312591552734], [-119.85619354248047, 34.166805267333984], [-119.0654067993164, 34.78256607055664], [-119.55792999267578, 35.41507339477539]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;122&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#98df8a&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230401T203803_2309114_003/EMIT_L2A_RFL_001_20230401T203803_2309114_003.png&quot;, &quot;cloud_cover&quot;: 18.0, &quot;concept_id&quot;: &quot;G2648966116-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-04-01T20:38:15Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230401T203803_2309114_003&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-04-01T20:38:03Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.65480041503906, 33.66123580932617, -119.37867736816406, 34.90690994262695], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.87803649902344, 34.90690994262695], [-120.65480041503906, 34.290470123291016], [-120.15544128417969, 33.66123580932617], [-119.37867736816406, 34.27767562866211], [-119.87803649902344, 34.90690994262695]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;125&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#d62728&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230405T190311_2309513_002/EMIT_L2A_RFL_001_20230405T190311_2309513_002.png&quot;, &quot;cloud_cover&quot;: 71.0, &quot;concept_id&quot;: &quot;G2667368816-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-04-05T19:03:23Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230405T190311_2309513_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-04-05T19:03:11Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.99520111083984, 33.94091033935547, -119.80156707763672, 35.12071228027344], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.4982681274414, 35.12071228027344], [-120.99520111083984, 34.488731384277344], [-120.29850006103516, 33.94091033935547], [-119.80156707763672, 34.57289123535156], [-120.4982681274414, 35.12071228027344]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;154&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#9467bd&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230422T195924_2311213_002/EMIT_L2A_RFL_001_20230422T195924_2311213_002.png&quot;, &quot;cloud_cover&quot;: 40.0, &quot;concept_id&quot;: &quot;G2667503312-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-04-22T19:59:36Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230422T195924_2311213_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-04-22T19:59:24Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.75292205810547, 34.20085144042969, -119.47516632080078, 35.441497802734375], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.96105194091797, 35.441497802734375], [-120.75292205810547, 34.82750701904297], [-120.26703643798828, 34.20085144042969], [-119.47516632080078, 34.814842224121094], [-119.96105194091797, 35.441497802734375]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;177&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#c5b0d5&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230528T220420_2314815_004/EMIT_L2A_RFL_001_20230528T220420_2314815_004.png&quot;, &quot;cloud_cover&quot;: 52.0, &quot;concept_id&quot;: &quot;G2699997381-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-05-28T22:04:32Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230528T220420_2314815_004&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-05-28T22:04:20Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.82316589355469, 33.28789520263672, -119.58209228515625, 34.51665496826172], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.29042053222656, 34.51665496826172], [-120.82316589355469, 33.912635803222656], [-120.11483764648438, 33.28789520263672], [-119.58209228515625, 33.89191436767578], [-120.29042053222656, 34.51665496826172]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;179&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#8c564b&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230601T202611_2315214_002/EMIT_L2A_RFL_001_20230601T202611_2315214_002.png&quot;, &quot;cloud_cover&quot;: 15.0, &quot;concept_id&quot;: &quot;G2720810376-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-06-01T20:26:23Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230601T202611_2315214_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-06-01T20:26:11Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.83880615234375, 34.10605239868164, -119.65158081054688, 35.27558517456055], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.35333251953125, 35.27558517456055], [-120.83880615234375, 34.655216217041016], [-120.13705444335938, 34.10605239868164], [-119.65158081054688, 34.72642135620117], [-120.35333251953125, 35.27558517456055]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;207&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#e377c2&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230629T170449_2318011_002/EMIT_L2A_RFL_001_20230629T170449_2318011_002.png&quot;, &quot;cloud_cover&quot;: 48.0, &quot;concept_id&quot;: &quot;G2735424106-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-06-29T17:05:01Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230629T170449_2318011_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-06-29T17:04:49Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-121.32658386230469, 34.04823303222656, -120.03990173339844, 35.29765319824219], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.529296875, 35.29765319824219], [-121.32658386230469, 34.681610107421875], [-120.83718872070312, 34.04823303222656], [-120.03990173339844, 34.664276123046875], [-120.529296875, 35.29765319824219]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;292&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#f7b6d2&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230923T232101_2326615_002/EMIT_L2A_RFL_001_20230923T232101_2326615_002.png&quot;, &quot;cloud_cover&quot;: 73.0, &quot;concept_id&quot;: &quot;G2772438951-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-09-23T23:21:13Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230923T232101_2326615_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-09-23T23:21:01Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.67430114746094, 34.55021286010742, -119.03335571289062, 36.0649299621582], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-119.51744079589844, 36.0649299621582], [-120.67430114746094, 35.19106674194336], [-120.19021606445312, 34.55021286010742], [-119.03335571289062, 35.424076080322266], [-119.51744079589844, 36.0649299621582]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;295&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#7f7f7f&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230923T232113_2326615_003/EMIT_L2A_RFL_001_20230923T232113_2326615_003.png&quot;, &quot;cloud_cover&quot;: 10.0, &quot;concept_id&quot;: &quot;G2772444304-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-09-23T23:21:31Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20230923T232113_2326615_003&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-09-23T23:21:13Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-121.28294372558594, 33.98479461669922, -120.09658813476562, 35.15521240234375], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.79351806640625, 35.15521240234375], [-121.28294372558594, 34.53301239013672], [-120.58601379394531, 33.98479461669922], [-120.09658813476562, 34.60699462890625], [-120.79351806640625, 35.15521240234375]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;309&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#bcbd22&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20231014T224006_2328715_002/EMIT_L2A_RFL_001_20231014T224006_2328715_002.png&quot;, &quot;cloud_cover&quot;: 66.0, &quot;concept_id&quot;: &quot;G2786272677-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-10-14T22:40:18Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20231014T224006_2328715_002&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-10-14T22:40:06Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.63442993164062, 33.211692810058594, -119.12010192871094, 34.64470672607422], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.14164733886719, 34.64470672607422], [-120.63442993164062, 34.02814483642578], [-119.61288452148438, 33.211692810058594], [-119.12010192871094, 33.82825469970703], [-120.14164733886719, 34.64470672607422]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;310&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#dbdb8d&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20231014T224018_2328715_003/EMIT_L2A_RFL_001_20231014T224018_2328715_003.png&quot;, &quot;cloud_cover&quot;: 93.0, &quot;concept_id&quot;: &quot;G2786302498-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-10-14T22:40:36Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20231014T224018_2328715_003&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-10-14T22:40:18Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-121.20394134521484, 34.72146224975586, -120.00861358642578, 35.896907806396484], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.72254180908203, 35.896907806396484], [-121.20394134521484, 35.2675666809082], [-120.4900131225586, 34.72146224975586], [-120.00861358642578, 35.35080337524414], [-120.72254180908203, 35.896907806396484]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;315&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#17becf&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20231018T210205_2329114_005/EMIT_L2A_RFL_001_20231018T210205_2329114_005.png&quot;, &quot;cloud_cover&quot;: 11.0, &quot;concept_id&quot;: &quot;G2786557891-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-10-18T21:02:17Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20231018T210205_2329114_005&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-10-18T21:02:05Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.54254150390625, 34.2210693359375, -119.35418701171875, 35.391700744628906], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.05732727050781, 35.391700744628906], [-120.54254150390625, 34.768699645996094], [-119.83940124511719, 34.2210693359375], [-119.35418701171875, 34.84407043457031], [-120.05732727050781, 35.391700744628906]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;318&quot;, &quot;properties&quot;: {&quot;__folium_color&quot;: &quot;#9edae5&quot;, &quot;browse&quot;: &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/EMITL2ARFL.001/EMIT_L2A_RFL_001_20231018T210217_2329114_006/EMIT_L2A_RFL_001_20231018T210217_2329114_006.png&quot;, &quot;cloud_cover&quot;: 9.0, &quot;concept_id&quot;: &quot;G2786556493-LPCLOUD&quot;, &quot;day_night&quot;: &quot;Day&quot;, &quot;end_datetime&quot;: &quot;2023-10-18T21:02:29Z&quot;, &quot;granule&quot;: &quot;EMIT_L2A_RFL_001_20231018T210217_2329114_006&quot;, &quot;shortname&quot;: &quot;EMITL2ARFL&quot;, &quot;start_datetime&quot;: &quot;2023-10-18T21:02:17Z&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_f6eeab443a76b9c7230c8239eaca257b.bindTooltip(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);
    
    let handleObject = feature=&gt;typeof(feature)==&#x27;object&#x27; ? JSON.stringify(feature) : feature;
    let fields = [&quot;granule&quot;, &quot;start_datetime&quot;, &quot;cloud_cover&quot;];
    let aliases = [&quot;granule&quot;, &quot;start_datetime&quot;, &quot;cloud_cover&quot;];
    let table = &#x27;&lt;table&gt;&#x27; +
        String(
        fields.map(
        (v,i)=&gt;
        `&lt;tr&gt;
            &lt;th&gt;${aliases[i]}&lt;/th&gt;
            
            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;
        &lt;/tr&gt;`).join(&#x27;&#x27;))
    +&#x27;&lt;/table&gt;&#x27;;
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
    geo_json_f6eeab443a76b9c7230c8239eaca257b.bindPopup(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);
    
    let handleObject = feature=&gt;typeof(feature)==&#x27;object&#x27; ? JSON.stringify(feature) : feature;
    let fields = [&quot;concept_id&quot;, &quot;granule&quot;, &quot;start_datetime&quot;, &quot;end_datetime&quot;, &quot;day_night&quot;, &quot;cloud_cover&quot;, &quot;browse&quot;, &quot;shortname&quot;];
    let aliases = [&quot;concept_id&quot;, &quot;granule&quot;, &quot;start_datetime&quot;, &quot;end_datetime&quot;, &quot;day_night&quot;, &quot;cloud_cover&quot;, &quot;browse&quot;, &quot;shortname&quot;];
    let table = &#x27;&lt;table&gt;&#x27; +
        String(
        fields.map(
        (v,i)=&gt;
        `&lt;tr&gt;
            &lt;th&gt;${aliases[i].toLocaleString()}&lt;/th&gt;
            
            &lt;td&gt;${handleObject(layer.feature.properties[v]).toLocaleString()}&lt;/td&gt;
        &lt;/tr&gt;`).join(&#x27;&#x27;))
    +&#x27;&lt;/table&gt;&#x27;;
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumpopup&quot;});
                     
    
            geo_json_f6eeab443a76b9c7230c8239eaca257b.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_0564c125b0ea4cb51ef447f32adc198f = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_0564c125b0ea4cb51ef447f32adc198f.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_437e904af7932894319e4a93d6f72e7a = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_437e904af7932894319e4a93d6f72e7a.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_bc880451b00588fd3fd7e2f0967febce = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_bc880451b00588fd3fd7e2f0967febce.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_c8f7f1700f585396f6a3eadc098a0b32 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0711_02/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0711_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_c8f7f1700f585396f6a3eadc098a0b32.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_ea7f097887613c3571415dc1c16ed14c = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0710_01/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_ea7f097887613c3571415dc1c16ed14c.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_f8ca58d3e22e0af0ec2d8014a5ceeacc = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0711_02/ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0711_02.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_f8ca58d3e22e0af0ec2d8014a5ceeacc.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_a279de32c2e098f751e663c0d288aa9f = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0710_01/ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_a279de32c2e098f751e663c0d288aa9f.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_476074502133f5fba568c31cba53641f = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0710_01/ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_476074502133f5fba568c31cba53641f.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_38f6ec7ccca281db7fd02e8934db1115 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01/ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_38f6ec7ccca281db7fd02e8934db1115.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_2e12160744e777184218f74d09ee81e3 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0710_01/ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_2e12160744e777184218f74d09ee81e3.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_984cbf87e8dcfeb68d8a0b82dc522b35 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0710_01/ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0710_01.png&quot;,
                [[34.207188, -120.828926], [35.223133, -119.598442]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_984cbf87e8dcfeb68d8a0b82dc522b35.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_b1d3d47aa5e823995c9e2918349fe3cc = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0710_01/ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0710_01.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_b1d3d47aa5e823995c9e2918349fe3cc.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_aa2a3524ff66457a753e2eacf78925e8 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0710_01/ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0710_01.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_aa2a3524ff66457a753e2eacf78925e8.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_0ccb92cc961d19bbefc61b9924db90dc = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0711_01/ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0711_01.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_0ccb92cc961d19bbefc61b9924db90dc.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            var image_overlay_fbd78af21813c33d073c48d5891c7a86 = L.imageOverlay(
                &quot;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0711_01/ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0711_01.png&quot;,
                [[34.20718855068355, -120.82892726886365], [35.223132916637724, -119.59844380403435]],
                {&quot;crossOrigin&quot;: false, &quot;interactive&quot;: false, &quot;opacity&quot;: 0.75, &quot;zindex&quot;: 1}
            );
        
    
            image_overlay_fbd78af21813c33d073c48d5891c7a86.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
        function geo_json_cc8376e28021cfb99737af3c4427e29a_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.1, &quot;weight&quot;: 2, &quot;width&quot;: 2};
            }
        }
        function geo_json_cc8376e28021cfb99737af3c4427e29a_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_cc8376e28021cfb99737af3c4427e29a_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_cc8376e28021cfb99737af3c4427e29a_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_cc8376e28021cfb99737af3c4427e29a_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_cc8376e28021cfb99737af3c4427e29a.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_cc8376e28021cfb99737af3c4427e29a_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_cc8376e28021cfb99737af3c4427e29a = L.geoJson(null, {
                onEachFeature: geo_json_cc8376e28021cfb99737af3c4427e29a_onEachFeature,
            
                style: geo_json_cc8376e28021cfb99737af3c4427e29a_styler,
                pointToLayer: geo_json_cc8376e28021cfb99737af3c4427e29a_pointToLayer,
        });

        function geo_json_cc8376e28021cfb99737af3c4427e29a_add (data) {
            geo_json_cc8376e28021cfb99737af3c4427e29a
                .addData(data);
        }
            geo_json_cc8376e28021cfb99737af3c4427e29a_add({&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.01175444547289, 34.743985733609556], &quot;features&quot;: [{&quot;bbox&quot;: [-120.07168830185367, 34.67874372675126, -120.01175444547289, 34.743985733609556], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.04041123986089, 34.74342268352134], [-120.04121889204112, 34.743735066665835], [-120.04233680955474, 34.743985733609556], [-120.04347866996883, 34.742743832848156], [-120.04466572607036, 34.7424755469407], [-120.0448866879965, 34.74191265779671], [-120.04532294168776, 34.74159883138454], [-120.04804960173333, 34.741930978842824], [-120.04882554857339, 34.74223480319798], [-120.04949820119256, 34.74213674742191], [-120.04993617368781, 34.74236084527639], [-120.05063226768779, 34.74246510413567], [-120.05084529371707, 34.74296515425221], [-120.05181991617927, 34.742292688494636], [-120.05248533194795, 34.74258310344906], [-120.05311871770458, 34.742205091313274], [-120.0537722979379, 34.7422376073561], [-120.05409711012827, 34.74194830623631], [-120.0543713797112, 34.74209128417946], [-120.05479918084599, 34.74210391650734], [-120.05579592922335, 34.741837342896304], [-120.05694257691489, 34.74214544480658], [-120.05741042037987, 34.74181489507682], [-120.05767271320745, 34.74132546754863], [-120.05754227015422, 34.740740878009824], [-120.05876345149959, 34.74069180836263], [-120.05917953489605, 34.74018712575532], [-120.0587615854979, 34.739770015724844], [-120.06043616892654, 34.73832197492165], [-120.06128451686234, 34.73743320382969], [-120.0633872937648, 34.73640466515508], [-120.0639059857869, 34.7363786768863], [-120.06403134870462, 34.73519616510308], [-120.06454804185732, 34.734541873380046], [-120.06744848879882, 34.733043732603065], [-120.070616303288, 34.72952389483826], [-120.07043959994115, 34.72724173490022], [-120.0711658556598, 34.72294007365655], [-120.07168830185367, 34.71997034050748], [-120.06802222094016, 34.71707138144172], [-120.0643838637534, 34.71556891113268], [-120.06181919501256, 34.71432727384942], [-120.06086869366344, 34.7146474924856], [-120.0601201043257, 34.7146055700268], [-120.05915143262852, 34.712156508207215], [-120.05914365552792, 34.71213594341261], [-120.0579297886696, 34.709929219916546], [-120.05770835562292, 34.70940385347888], [-120.05751031403676, 34.708753407845755], [-120.05739358464504, 34.707625117415304], [-120.05644763385853, 34.70594280996333], [-120.05643958520336, 34.70592877328525], [-120.05560802087543, 34.7041919156709], [-120.05554467210189, 34.70251089221562], [-120.05550630815135, 34.701492772768894], [-120.055461488798, 34.7005885983348], [-120.0554596736261, 34.7005550655234], [-120.0554039826769, 34.69948129063735], [-120.05538831873399, 34.698385230495944], [-120.05526178291916, 34.69616125098816], [-120.05517157722116, 34.694136196842145], [-120.05507940302671, 34.69206681413075], [-120.05507556891348, 34.691797549336464], [-120.05506238375865, 34.69087158829482], [-120.05516147749043, 34.69025048197192], [-120.05537367433509, 34.688920416937414], [-120.05477895715674, 34.687500193851115], [-120.05421030242205, 34.68614216540855], [-120.05437973139783, 34.683147158844996], [-120.05446824425277, 34.681582630902554], [-120.05427316208798, 34.68056492337604], [-120.05409520266919, 34.67963650372387], [-120.05409236336455, 34.67898649251284], [-120.05086593954367, 34.67894506251114], [-120.04735720219035, 34.67889985551723], [-120.0454382179078, 34.67887508968519], [-120.04296564515735, 34.67884313196442], [-120.03885718195134, 34.67878992264703], [-120.03882024814752, 34.67878944343524], [-120.038822553688, 34.67878278821947], [-120.03864999677779, 34.67878153792925], [-120.03857836007664, 34.67878101897387], [-120.0375931324717, 34.6787738631857], [-120.03344480724418, 34.67877083712449], [-120.0285350182976, 34.67874372675126], [-120.02766842116552, 34.67966056614673], [-120.02688127769018, 34.681520761856035], [-120.02565480881036, 34.686067202877275], [-120.02557636256647, 34.68749492328606], [-120.02540359502339, 34.69063897254925], [-120.02698181220869, 34.691998736361825], [-120.02707411605091, 34.704552662731395], [-120.02711070780717, 34.71876004647024], [-120.02728384103979, 34.719704576193706], [-120.02488659066623, 34.72151568825152], [-120.01860679260076, 34.72166938674092], [-120.01819018507503, 34.721863965265676], [-120.01794880316505, 34.72197670352912], [-120.0181373446802, 34.723016839560394], [-120.0181601976407, 34.72314289819512], [-120.01268426806213, 34.72738510493605], [-120.01248884292058, 34.72753649045302], [-120.01243858361981, 34.72813618399153], [-120.01175444547289, 34.729442988434734], [-120.01960069899336, 34.735545259144054], [-120.02895215128893, 34.742804281371775], [-120.02912625895728, 34.742742063707205], [-120.02981138599067, 34.7427657274346], [-120.03090839289258, 34.74269810021536], [-120.03202999082784, 34.74302707415178], [-120.03311348576628, 34.74237415359347], [-120.03333602264894, 34.74317636970352], [-120.03380537304476, 34.74313736951284], [-120.03475265629952, 34.743324641364374], [-120.03595506984117, 34.74345547658775], [-120.03733930865612, 34.742861728096315], [-120.04041123986089, 34.74342268352134]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 5874.21, &quot;Name&quot;: &quot;Sedgwick Reserve&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-120.499289029747, 34.4422979925537, -120.357702146634, 34.574184013493], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-120.473673757175, 34.5698725745769], [-120.474268898347, 34.5700040405158], [-120.474600420056, 34.5701232448023], [-120.474945113745, 34.5701935127921], [-120.475165291462, 34.5701956555251], [-120.475829839562, 34.5703522163797], [-120.476126837274, 34.570484771851], [-120.476367652784, 34.5705644460913], [-120.476767257077, 34.5707922837598], [-120.476956580558, 34.570862527191], [-120.47733898406, 34.5709833977747], [-120.477599964183, 34.5710588660795], [-120.47817850394, 34.5712261617217], [-120.481738523721, 34.5722400097051], [-120.486565296247, 34.5739613611966], [-120.487336678587, 34.5741731203603], [-120.487458438702, 34.574184013493], [-120.487792444198, 34.5688007459224], [-120.488221077539, 34.5644728137622], [-120.488428943236, 34.5614911377697], [-120.489191659322, 34.5505070706799], [-120.489267306881, 34.5494175061616], [-120.48991932846, 34.5400250245606], [-120.49155701063, 34.5153077705207], [-120.490914956929, 34.5153470831478], [-120.490858485216, 34.515352131213], [-120.490409558688, 34.5153020000506], [-120.490331954646, 34.514724729607], [-120.490604744291, 34.5144394345523], [-120.491028935108, 34.5144253018181], [-120.49161675957, 34.514405716414], [-120.491877588824, 34.5117997226576], [-120.492389392466, 34.5116813855763], [-120.492404682661, 34.5114140472664], [-120.492268448668, 34.5107907923188], [-120.493188821525, 34.5110243541547], [-120.493970350972, 34.5109179461089], [-120.495068521249, 34.5108643502897], [-120.495038659034, 34.5115200674382], [-120.495039163031, 34.5120929218963], [-120.495984242865, 34.5125697378642], [-120.498181346587, 34.5130307621533], [-120.498123390052, 34.5123369936108], [-120.498095764042, 34.5120062836795], [-120.497985803758, 34.5106899533691], [-120.498090845087, 34.5106889410481], [-120.498303942318, 34.5105477020061], [-120.498625059495, 34.5103348662614], [-120.498762182787, 34.5102439802922], [-120.498871329196, 34.510171638186], [-120.498894553595, 34.5100221260595], [-120.498923852075, 34.509873347969], [-120.498959195165, 34.5097254716365], [-120.499000538146, 34.5095786657504], [-120.499059573485, 34.509374940859], [-120.499147206376, 34.5090423929844], [-120.499202559112, 34.508820276959], [-120.499239734895, 34.5085488741828], [-120.499250794996, 34.5083486531177], [-120.499254083819, 34.5081482414938], [-120.499249597285, 34.507947844773], [-120.499237340047, 34.5077476710807], [-120.499217325463, 34.5075479267013], [-120.499189573417, 34.507348816988], [-120.499154112519, 34.5071505481559], [-120.499289029747, 34.5071287386186], [-120.499233464986, 34.5069405231472], [-120.499221872857, 34.5069012600297], [-120.499063837923, 34.5064646326826], [-120.498932996477, 34.5061570457899], [-120.498818408853, 34.5058720119715], [-120.498623315983, 34.5054732140658], [-120.498181088135, 34.5047088104681], [-120.498023587755, 34.5044365643444], [-120.497580505627, 34.503737414272], [-120.496127891706, 34.501135679845], [-120.496240754909, 34.5009613084681], [-120.498011374504, 34.5005639046725], [-120.496306010257, 34.4955043966029], [-120.495431360006, 34.4947586359758], [-120.49356932046, 34.4945977079514], [-120.490977259782, 34.4920943138676], [-120.490423013336, 34.4903539674059], [-120.490172553336, 34.4895674891384], [-120.489164684652, 34.4881510121425], [-120.488200969833, 34.4870440781173], [-120.4853270001, 34.4847528928572], [-120.482819733794, 34.4836013402195], [-120.481681765562, 34.4824480217754], [-120.480701626145, 34.481628318715], [-120.478441632665, 34.4797381663922], [-120.47555283623, 34.4736303146603], [-120.474105463343, 34.4681500043105], [-120.473110842247, 34.4582269564998], [-120.473291886157, 34.4579641923204], [-120.473033475491, 34.4576316197362], [-120.472465884553, 34.454125694944], [-120.471356238116, 34.4532217783727], [-120.471167899797, 34.4530029200902], [-120.471109787149, 34.4528695275691], [-120.471051009323, 34.4527137192015], [-120.470927808689, 34.4523696044615], [-120.470671353503, 34.4520348496189], [-120.470471318945, 34.4516461693752], [-120.470385940596, 34.4508530206709], [-120.470123969058, 34.4504283806063], [-120.470758833753, 34.4500416825379], [-120.471181960124, 34.4497839510985], [-120.471229059664, 34.4495184686253], [-120.471391697591, 34.449055697612], [-120.471832931443, 34.4488269769211], [-120.471729365609, 34.4486278295873], [-120.471769946125, 34.4482690466694], [-120.471601486969, 34.4482642285405], [-120.471060999993, 34.4485040526842], [-120.470621018159, 34.4483090603018], [-120.470211336098, 34.4489511927851], [-120.470026476405, 34.4492427757797], [-120.469515037907, 34.4494160416012], [-120.469387911847, 34.4496920110722], [-120.468461511874, 34.4498741956832], [-120.46792536886, 34.4492790586956], [-120.467628986712, 34.4489500597483], [-120.466905240826, 34.4492565098178], [-120.465943966248, 34.4496195672036], [-120.464655193256, 34.4493073949995], [-120.463223894796, 34.4489163034687], [-120.462337772009, 34.448543633795], [-120.462042398192, 34.4482141712519], [-120.461744849481, 34.4478822790921], [-120.460304664703, 34.4478302116895], [-120.459417799422, 34.4474569508048], [-120.458732212012, 34.4468598517634], [-120.458633656842, 34.4466090206738], [-120.458568737608, 34.4465524767442], [-120.458539199729, 34.446368614307], [-120.458348529198, 34.4458833332416], [-120.458437544011, 34.4457358718019], [-120.458793232881, 34.4451463663297], [-120.458580378696, 34.4446115419742], [-120.457432245138, 34.4448826048084], [-120.456587131457, 34.4444478258254], [-120.456509992418, 34.4436265031584], [-120.456251349387, 34.4433206638602], [-120.454226425466, 34.4430624112946], [-120.452653913344, 34.4422979925537], [-120.451946239776, 34.4428771121843], [-120.452723807357, 34.4439614575846], [-120.452662645674, 34.4446677630137], [-120.45299172018, 34.4452437279766], [-120.452378457834, 34.4463626224092], [-120.451337168761, 34.4473187915795], [-120.450815849917, 34.4475094506155], [-120.449452910472, 34.4480707744484], [-120.447853024737, 34.4485992714863], [-120.44651085367, 34.4489421125084], [-120.446197814568, 34.4490987913058], [-120.445933656964, 34.4493747732761], [-120.445690728059, 34.4497555826001], [-120.445664821648, 34.4501094624365], [-120.445527423023, 34.4503753710323], [-120.445067684528, 34.4507906225475], [-120.444091370672, 34.4512313167406], [-120.442577243774, 34.451592613765], [-120.441686382297, 34.4516926907227], [-120.441166637934, 34.4517131747041], [-120.439587673205, 34.4515143770564], [-120.438752019035, 34.4514910820401], [-120.438144977525, 34.4514230890755], [-120.437709009405, 34.4514118015094], [-120.437216386959, 34.4515319659313], [-120.435667778514, 34.4515430183671], [-120.433915709264, 34.4512173076069], [-120.433511977675, 34.4512159591047], [-120.432471559705, 34.4510758598459], [-120.431694041238, 34.4509711547898], [-120.430274981666, 34.4506354702667], [-120.429709877218, 34.4505698414206], [-120.427587364016, 34.4503233179728], [-120.426876996484, 34.4501715463065], [-120.426573549182, 34.4501067116115], [-120.426252977703, 34.4500382182339], [-120.426069043101, 34.4499828397236], [-120.425305471374, 34.4498825737903], [-120.424686149467, 34.4498427536747], [-120.424093665868, 34.449750436401], [-120.42369541987, 34.4497960027391], [-120.422983491614, 34.4497472263523], [-120.422578813789, 34.4498377637825], [-120.422318659693, 34.4498616485717], [-120.42166000293, 34.449948737694], [-120.421170073867, 34.4500761754989], [-120.420347271565, 34.4504210764452], [-120.419873540428, 34.4507205520857], [-120.419606490998, 34.4509742238109], [-120.419461252804, 34.4512224611556], [-120.41938000696, 34.451458347596], [-120.419247384212, 34.4517429451309], [-120.419092122298, 34.4520046495873], [-120.418732145913, 34.4523178169448], [-120.418551892974, 34.4526816394167], [-120.418130582665, 34.4530465606527], [-120.417327488518, 34.453337695674], [-120.417002568518, 34.4533290902482], [-120.416815715888, 34.4534425426647], [-120.416424365124, 34.4535355947168], [-120.416421240814, 34.4535684660067], [-120.416386822882, 34.4539302025903], [-120.415253324658, 34.4658423090285], [-120.415203159248, 34.4663696083867], [-120.414631607579, 34.4723787160223], [-120.414212857113, 34.4767808450416], [-120.413944433307, 34.479602343388], [-120.413572918172, 34.4835074657814], [-120.412758369169, 34.4920677898374], [-120.412631823749, 34.4933975958215], [-120.407916577951, 34.4935100590974], [-120.402751700365, 34.4936316954858], [-120.401901835879, 34.4936516876257], [-120.397238699848, 34.493748887132], [-120.39273691307, 34.4938674321066], [-120.392352081229, 34.4938750793525], [-120.384896714585, 34.4940327862872], [-120.379993579422, 34.4941362584553], [-120.377839650906, 34.4941844453204], [-120.375991353319, 34.4952713912298], [-120.367965449605, 34.4999906114074], [-120.36774377502, 34.5001209379492], [-120.367258680304, 34.5001285638213], [-120.359126424738, 34.5002522419618], [-120.357702146634, 34.5032125420973], [-120.361217526605, 34.5032709808622], [-120.362496951952, 34.5049436060675], [-120.363440873389, 34.5054831944267], [-120.364018740336, 34.5077227097778], [-120.36332904295, 34.5097295561369], [-120.365031422912, 34.512252712451], [-120.364823694436, 34.5132242917346], [-120.365451937221, 34.5139480412655], [-120.365912887008, 34.5150702730013], [-120.366075878921, 34.5151302783262], [-120.367480358202, 34.5152657277682], [-120.372391160666, 34.5151371671737], [-120.374779134133, 34.5169819151248], [-120.375285265406, 34.5190637237547], [-120.375991611003, 34.5200795699009], [-120.376052771394, 34.5201675308613], [-120.375991612848, 34.520312157324], [-120.375825956212, 34.5207038871999], [-120.375371804881, 34.521710699293], [-120.376007023441, 34.5220722562213], [-120.376074413575, 34.5220940649509], [-120.379466799792, 34.5231916669648], [-120.381006658897, 34.5232676428505], [-120.38092307914, 34.5223796673316], [-120.381034098714, 34.5224374368346], [-120.381499443479, 34.5224710672393], [-120.382046494517, 34.5225665382582], [-120.382515496285, 34.5227091531803], [-120.383152184578, 34.5231667974061], [-120.383582357008, 34.5229531980577], [-120.383939000798, 34.5230580496765], [-120.384237198508, 34.5236258124823], [-120.38483672678, 34.523690302715], [-120.385028538973, 34.5237824405921], [-120.385133055655, 34.5243014906451], [-120.385260356192, 34.5246971293101], [-120.385664797403, 34.5247741292164], [-120.385915594467, 34.5250083704182], [-120.386574598676, 34.5256794109736], [-120.387111529327, 34.5257416314091], [-120.38773024861, 34.5260540412035], [-120.388022004063, 34.5262971539976], [-120.388676419447, 34.5264054084611], [-120.389529073335, 34.5265464525374], [-120.390504185866, 34.526640802745], [-120.391009207089, 34.5268431739642], [-120.391005721786, 34.5267264247092], [-120.391437325341, 34.5266492011179], [-120.391967696094, 34.5267829930735], [-120.393598177772, 34.5279179871388], [-120.394278999323, 34.5281045152003], [-120.395653188293, 34.5280785241694], [-120.396858599886, 34.5283576586532], [-120.397527577687, 34.5283971605779], [-120.398163868095, 34.5282842450376], [-120.398358239519, 34.5275018086042], [-120.399457794637, 34.5296274952515], [-120.402517701634, 34.5306632925699], [-120.404956161772, 34.531969355796], [-120.40789835488, 34.5352810789159], [-120.410703648928, 34.5371664852474], [-120.409762714298, 34.5407936959614], [-120.407431728691, 34.5416454409844], [-120.407227166948, 34.5419090188626], [-120.406306210521, 34.543079851039], [-120.406944456954, 34.5441272876299], [-120.407522149604, 34.5456565779677], [-120.406954902755, 34.5465708190505], [-120.408105884287, 34.5471715234752], [-120.412261839527, 34.5465707765058], [-120.413848941698, 34.5465817557597], [-120.416997571025, 34.5466034809769], [-120.420464462939, 34.5466273070577], [-120.423568318481, 34.5453059371054], [-120.425671437831, 34.5457077935336], [-120.429380659739, 34.5470565617633], [-120.430824990401, 34.5478858249855], [-120.432308362638, 34.5487374678597], [-120.430068074025, 34.5557487591411], [-120.430279946032, 34.5590111176329], [-120.432859692109, 34.5591264238944], [-120.434094197464, 34.5597121193747], [-120.43569484508, 34.559997118885], [-120.438418856458, 34.5594295723898], [-120.439090381371, 34.5593398374361], [-120.440824185975, 34.5596621084705], [-120.441772170159, 34.5599314010404], [-120.44634239648, 34.5617714738772], [-120.449838762706, 34.5627923451978], [-120.450674169161, 34.5631521959599], [-120.451140845572, 34.5635020140722], [-120.452148375883, 34.564463817018], [-120.455352153541, 34.5644374351165], [-120.456989566593, 34.5644071417117], [-120.458123596772, 34.5653783565248], [-120.459283206652, 34.565609708385], [-120.459998574452, 34.5669259718166], [-120.460969801901, 34.5675287882282], [-120.461670716271, 34.5676146889461], [-120.46336962219, 34.568922931321], [-120.465191204463, 34.570325572233], [-120.465566315188, 34.5702263782914], [-120.466455319658, 34.5699912928409], [-120.467503319101, 34.5699493585098], [-120.46821518151, 34.5699452256349], [-120.469612717659, 34.5698961713165], [-120.470564669519, 34.5698064646454], [-120.470932506464, 34.569834087755], [-120.471305184293, 34.5698172428706], [-120.47175025689, 34.569738163534], [-120.472009329261, 34.5697256920336], [-120.472274479659, 34.569749151624], [-120.473033797364, 34.5699056034398], [-120.473321205161, 34.5698689443084], [-120.473673757175, 34.5698725745769]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Acreage&quot;: 24458.6153971, &quot;Name&quot;: &quot;Dangermond Preserve&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_cc8376e28021cfb99737af3c4427e29a.bindTooltip(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);
    
    let handleObject = feature=&gt;typeof(feature)==&#x27;object&#x27; ? JSON.stringify(feature) : feature;
    let fields = [&quot;Name&quot;, &quot;Acreage&quot;];
    let aliases = [&quot;Name&quot;, &quot;Acreage&quot;];
    let table = &#x27;&lt;table&gt;&#x27; +
        String(
        fields.map(
        (v,i)=&gt;
        `&lt;tr&gt;
            &lt;th&gt;${aliases[i]}&lt;/th&gt;
            
            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;
        &lt;/tr&gt;`).join(&#x27;&#x27;))
    +&#x27;&lt;/table&gt;&#x27;;
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
            geo_json_cc8376e28021cfb99737af3c4427e29a.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    

        function geo_json_019f388e4b165b98596b6caeffddda82_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_019f388e4b165b98596b6caeffddda82 = L.geoJson(null, {
                onEachFeature: geo_json_019f388e4b165b98596b6caeffddda82_onEachFeature,
            
        });

        function geo_json_019f388e4b165b98596b6caeffddda82_add (data) {
            geo_json_019f388e4b165b98596b6caeffddda82
                .addData(data);
        }
            geo_json_019f388e4b165b98596b6caeffddda82_add({&quot;coordinates&quot;: [[[-120.499289029747, 34.4422979925537], [-120.01175444547289, 34.4422979925537], [-120.01175444547289, 34.743985733609556], [-120.499289029747, 34.743985733609556], [-120.499289029747, 34.4422979925537]]], &quot;type&quot;: &quot;Polygon&quot;});

        
    
            geo_json_019f388e4b165b98596b6caeffddda82.addTo(map_ad43c167016ca3e79cbd2b9da9746b79);
        
    
            map_ad43c167016ca3e79cbd2b9da9746b79.fitBounds(
                [[33.211692810058594, -121.59928894042969], [36.0649299621582, -118.7467269897461]],
                {}
            );
        
    
            var layer_control_fe893840abb5478b3d447d54f21b8dd0_layers = {
                base_layers : {
                    &quot;https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}&quot; : tile_layer_228334b2834cc3ad43220a11dad84298,
                },
                overlays :  {
                    &quot;ECOSTRESS&quot; : geo_json_f08b61e5e14082a1b73fc3ddf5645bd2,
                    &quot;EMIT&quot; : geo_json_f6eeab443a76b9c7230c8239eaca257b,
                    &quot;ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01&quot; : image_overlay_0564c125b0ea4cb51ef447f32adc198f,
                    &quot;ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01&quot; : image_overlay_437e904af7932894319e4a93d6f72e7a,
                    &quot;ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01&quot; : image_overlay_bc880451b00588fd3fd7e2f0967febce,
                    &quot;ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0711_02&quot; : image_overlay_c8f7f1700f585396f6a3eadc098a0b32,
                    &quot;ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0710_01&quot; : image_overlay_ea7f097887613c3571415dc1c16ed14c,
                    &quot;ECOv002_L2T_LSTE_26345_014_10SGD_20230227T172121_0711_02&quot; : image_overlay_f8ca58d3e22e0af0ec2d8014a5ceeacc,
                    &quot;ECOv002_L2T_LSTE_26860_001_10SGD_20230401T203733_0710_01&quot; : image_overlay_a279de32c2e098f751e663c0d288aa9f,
                    &quot;ECOv002_L2T_LSTE_26921_001_10SGD_20230405T190258_0710_01&quot; : image_overlay_476074502133f5fba568c31cba53641f,
                    &quot;ECOv002_L2T_LSTE_27185_010_10SGD_20230422T195836_0710_01&quot; : image_overlay_38f6ec7ccca281db7fd02e8934db1115,
                    &quot;ECOv002_L2T_LSTE_27745_005_10SGD_20230528T220401_0710_01&quot; : image_overlay_2e12160744e777184218f74d09ee81e3,
                    &quot;ECOv002_L2T_LSTE_27806_005_10SGD_20230601T202619_0710_01&quot; : image_overlay_984cbf87e8dcfeb68d8a0b82dc522b35,
                    &quot;ECOv002_L2T_LSTE_28238_012_10SGD_20230629T170416_0710_01&quot; : image_overlay_b1d3d47aa5e823995c9e2918349fe3cc,
                    &quot;ECOv002_L2T_LSTE_29576_005_10SGD_20230923T232104_0710_01&quot; : image_overlay_aa2a3524ff66457a753e2eacf78925e8,
                    &quot;ECOv002_L2T_LSTE_29901_007_10SGD_20231014T223936_0711_01&quot; : image_overlay_0ccb92cc961d19bbefc61b9924db90dc,
                    &quot;ECOv002_L2T_LSTE_29962_012_10SGD_20231018T210208_0711_01&quot; : image_overlay_fbd78af21813c33d073c48d5891c7a86,
                    &quot;Region of Interest&quot; : geo_json_cc8376e28021cfb99737af3c4427e29a,
                    &quot;bounding_box&quot; : geo_json_019f388e4b165b98596b6caeffddda82,
                },
            };
            let layer_control_fe893840abb5478b3d447d54f21b8dd0 = L.control.layers(
                layer_control_fe893840abb5478b3d447d54f21b8dd0_layers.base_layers,
                layer_control_fe893840abb5478b3d447d54f21b8dd0_layers.overlays,
                {&quot;autoZIndex&quot;: true, &quot;collapsed&quot;: true, &quot;position&quot;: &quot;topright&quot;}
            ).addTo(map_ad43c167016ca3e79cbd2b9da9746b79);

        
&lt;/script&gt;
&lt;/html&gt;" width="750px" height="375px"style="border:none !important;" "allowfullscreen" "webkitallowfullscreen" "mozallowfullscreen"></iframe></div></div>
</div>
<p>In the figure above, you can zoom in and out, and add or remove layers using the layer control in the top right. Notice that since we’re using the tiled ECOSTRESS product, we have 2 overlapping tiles at our ROI. You can visualize the tiles by adding or removing the layers.</p>
<p>From this figure, we can see there are two ECOSTRESS tiles: 10SGD and 10SKU, which both intersect with our area. Since both fall within tile 10SGD, we can keep results using 10SGD as a filter.</p>
<p><strong>There is a lot going on in the above visualization. After doing some additional filtering below, we can re-run the above cell to visualize our filtered scenes.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eco_gdf</span> <span class="o">=</span> <span class="n">eco_gdf</span><span class="p">[</span><span class="n">eco_gdf</span><span class="p">[</span><span class="s1">&#39;granule&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;10SGD&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; ECOSTRESS Granules: </span><span class="si">{</span><span class="n">eco_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> EMIT Granules: </span><span class="si">{</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> ECOSTRESS Granules: 17 
 EMIT Granules: 22
</pre></div>
</div>
</div>
</div>
<section id="previewing-emit-browse-imagery">
<h3>4.2 Previewing EMIT Browse Imagery<a class="headerlink" href="#previewing-emit-browse-imagery" title="Link to this heading">#</a></h3>
<p>The EMIT browse imagery is not orthorectified, so it can’t be visualized on a plot like the ECOSTRESS browse imagery. To get an idea what scenes look like we can plot them in a grid using matplotlib.</p>
<blockquote>
<div><p>Note: The black space is indicative of onboard cloud masking that occurs before data is downlinked from the ISS.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cols</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">rows</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">emit_gdf</span><span class="p">)</span><span class="o">/</span><span class="n">cols</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="k">for</span> <span class="n">_n</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">emit_gdf</span><span class="p">[</span><span class="s1">&#39;browse&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">_n</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">_n</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index: </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">emit_gdf</span><span class="p">[</span><span class="s1">&#39;granule&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">_n</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/49551f070a89905de1deef4702f41d6a380cc98870f03ea67ae51d8257b1753e.png" src="_images/49551f070a89905de1deef4702f41d6a380cc98870f03ea67ae51d8257b1753e.png" />
</div>
</div>
</section>
<section id="further-filtering">
<h3>4.3 Further Filtering<a class="headerlink" href="#further-filtering" title="Link to this heading">#</a></h3>
<p>We can see that some of these granules likely won’t work because of the large amount of cloud cover, we can use a list of these to filter them out. Make a list of indexes to filter out. <strong>Note that these indices can change since they are dependent on the order scenes are returned from CMR. Please doublecheck them before running this cell.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bad granule list</span>
<span class="n">bad_granules</span> <span class="o">=</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span><span class="mi">82</span><span class="p">,</span><span class="mi">115</span><span class="p">,</span><span class="mi">116</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">182</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Filter out the bad granules.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">emit_gdf</span> <span class="o">=</span> <span class="n">emit_gdf</span><span class="p">[</span><span class="o">~</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">bad_granules</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>Now that we’ve narrowed our EMIT results we can again filter the ECOSTRESS granules based on their concurrency with our filtered EMIT granules.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eco_gdf</span><span class="p">,</span> <span class="n">emit_gdf</span> <span class="o">=</span> <span class="n">concurrent_match</span><span class="p">(</span><span class="n">eco_gdf</span><span class="p">,</span><span class="n">emit_gdf</span><span class="p">,</span> <span class="n">col_name</span><span class="o">=</span><span class="s1">&#39;datetime_obj&#39;</span><span class="p">,</span><span class="n">time_delta</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; ECOSTRESS Granules: </span><span class="si">{</span><span class="n">eco_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1"> EMIT Granules: </span><span class="si">{</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> ECOSTRESS Granules: 15 
 EMIT Granules: 16
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eco_gdf</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>concept_id</th>
      <th>granule</th>
      <th>start_datetime</th>
      <th>end_datetime</th>
      <th>day_night</th>
      <th>cloud_cover</th>
      <th>geometry</th>
      <th>browse</th>
      <th>shortname</th>
      <th>datetime_obj</th>
      <th>intersects</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>52</th>
      <td>G2627756987-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26223_011_10SGD_20230219T2028...</td>
      <td>2023-02-19T20:28:51.310Z</td>
      <td>2023-02-19T20:29:43.280Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-02-19 20:28:51.310000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>54</th>
      <td>G2627758024-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26223_012_10SGD_20230219T2029...</td>
      <td>2023-02-19T20:29:43.280Z</td>
      <td>2023-02-19T20:30:35.250Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-02-19 20:29:43.280000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>75</th>
      <td>G2630582431-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26345_013_10SGD_20230227T1720...</td>
      <td>2023-02-27T17:20:29.100Z</td>
      <td>2023-02-27T17:21:21.070Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-02-27 17:20:29.100000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>76</th>
      <td>G3015778622-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26345_013_10SGD_20230227T1720...</td>
      <td>2023-02-27T17:20:29.104Z</td>
      <td>2023-02-27T17:21:21.074Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-02-27 17:20:29.104000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>79</th>
      <td>G2630583457-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26345_014_10SGD_20230227T1721...</td>
      <td>2023-02-27T17:21:21.070Z</td>
      <td>2023-02-27T17:22:13.040Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-02-27 17:21:21.070000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>81</th>
      <td>G3015772990-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26345_014_10SGD_20230227T1721...</td>
      <td>2023-02-27T17:21:21.074Z</td>
      <td>2023-02-27T17:22:13.044Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-02-27 17:21:21.074000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>119</th>
      <td>G2650963815-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26860_001_10SGD_20230401T2037...</td>
      <td>2023-04-01T20:37:33.030Z</td>
      <td>2023-04-01T20:38:25.000Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-04-01 20:37:33.030000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>124</th>
      <td>G2655983115-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_26921_001_10SGD_20230405T1902...</td>
      <td>2023-04-05T19:02:58.950Z</td>
      <td>2023-04-05T19:03:50.920Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-04-05 19:02:58.950000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>153</th>
      <td>G2710071138-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_27185_010_10SGD_20230422T1958...</td>
      <td>2023-04-22T19:58:36.740Z</td>
      <td>2023-04-22T19:59:28.710Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-04-22 19:58:36.740000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>174</th>
      <td>G2715826603-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_27745_005_10SGD_20230528T2204...</td>
      <td>2023-05-28T22:04:01.690Z</td>
      <td>2023-05-28T22:04:53.660Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-05-28 22:04:01.690000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>180</th>
      <td>G2715906073-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_27806_005_10SGD_20230601T2026...</td>
      <td>2023-06-01T20:26:19.770Z</td>
      <td>2023-06-01T20:27:11.740Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-06-01 20:26:19.770000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>205</th>
      <td>G2729123248-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_28238_012_10SGD_20230629T1704...</td>
      <td>2023-06-29T17:04:16.344Z</td>
      <td>2023-06-29T17:05:08.313Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-06-29 17:04:16.344000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>293</th>
      <td>G2772539755-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_29576_005_10SGD_20230923T2321...</td>
      <td>2023-09-23T23:21:04.439Z</td>
      <td>2023-09-23T23:21:56.408Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-09-23 23:21:04.439000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>307</th>
      <td>G2792244801-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_29901_007_10SGD_20231014T2239...</td>
      <td>2023-10-14T22:39:36.895Z</td>
      <td>2023-10-14T22:40:28.865Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-10-14 22:39:36.895000+00:00</td>
      <td>True</td>
    </tr>
    <tr>
      <th>316</th>
      <td>G2790664680-LPCLOUD</td>
      <td>ECOv002_L2T_LSTE_29962_012_10SGD_20231018T2102...</td>
      <td>2023-10-18T21:02:08.141Z</td>
      <td>2023-10-18T21:03:00.111Z</td>
      <td>Day</td>
      <td>NaN</td>
      <td>POLYGON ((-119.59844 34.20719, -119.59844 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>ECO_L2T_LSTE</td>
      <td>2023-10-18 21:02:08.141000+00:00</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">emit_gdf</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>concept_id</th>
      <th>granule</th>
      <th>start_datetime</th>
      <th>end_datetime</th>
      <th>day_night</th>
      <th>cloud_cover</th>
      <th>geometry</th>
      <th>browse</th>
      <th>shortname</th>
      <th>datetime_obj</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>53</th>
      <td>G2631040813-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230219T202939_2305013_002</td>
      <td>2023-02-19T20:29:39Z</td>
      <td>2023-02-19T20:29:51Z</td>
      <td>Day</td>
      <td>47.0</td>
      <td>POLYGON ((-120.70791 35.54348, -121.19894 34.9...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-02-19 20:29:39+00:00</td>
    </tr>
    <tr>
      <th>56</th>
      <td>G2631045418-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230219T202951_2305013_003</td>
      <td>2023-02-19T20:29:51Z</td>
      <td>2023-02-19T20:30:14Z</td>
      <td>Day</td>
      <td>67.0</td>
      <td>POLYGON ((-120.04838 35.03646, -120.54523 34.4...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-02-19 20:29:51+00:00</td>
    </tr>
    <tr>
      <th>77</th>
      <td>G2631818088-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230227T172116_2305811_004</td>
      <td>2023-02-27T17:21:16Z</td>
      <td>2023-02-27T17:21:28Z</td>
      <td>Day</td>
      <td>99.0</td>
      <td>POLYGON ((-120.73262 35.83169, -121.21741 35.1...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-02-27 17:21:16+00:00</td>
    </tr>
    <tr>
      <th>121</th>
      <td>G2648965598-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230401T203751_2309114_002</td>
      <td>2023-04-01T20:37:51Z</td>
      <td>2023-04-01T20:38:03Z</td>
      <td>Day</td>
      <td>80.0</td>
      <td>POLYGON ((-120.21542 34.90659, -120.99248 34.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-04-01 20:37:51+00:00</td>
    </tr>
    <tr>
      <th>122</th>
      <td>G2648966116-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230401T203803_2309114_003</td>
      <td>2023-04-01T20:38:03Z</td>
      <td>2023-04-01T20:38:15Z</td>
      <td>Day</td>
      <td>18.0</td>
      <td>POLYGON ((-119.55793 35.41507, -120.34872 34.7...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-04-01 20:38:03+00:00</td>
    </tr>
    <tr>
      <th>125</th>
      <td>G2667368816-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230405T190311_2309513_002</td>
      <td>2023-04-05T19:03:11Z</td>
      <td>2023-04-05T19:03:23Z</td>
      <td>Day</td>
      <td>71.0</td>
      <td>POLYGON ((-119.87804 34.90691, -120.65480 34.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-04-05 19:03:11+00:00</td>
    </tr>
    <tr>
      <th>154</th>
      <td>G2667503312-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230422T195924_2311213_002</td>
      <td>2023-04-22T19:59:24Z</td>
      <td>2023-04-22T19:59:36Z</td>
      <td>Day</td>
      <td>40.0</td>
      <td>POLYGON ((-120.49827 35.12071, -120.99520 34.4...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-04-22 19:59:24+00:00</td>
    </tr>
    <tr>
      <th>177</th>
      <td>G2699997381-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230528T220420_2314815_004</td>
      <td>2023-05-28T22:04:20Z</td>
      <td>2023-05-28T22:04:32Z</td>
      <td>Day</td>
      <td>52.0</td>
      <td>POLYGON ((-119.96105 35.44150, -120.75292 34.8...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-05-28 22:04:20+00:00</td>
    </tr>
    <tr>
      <th>179</th>
      <td>G2720810376-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230601T202611_2315214_002</td>
      <td>2023-06-01T20:26:11Z</td>
      <td>2023-06-01T20:26:23Z</td>
      <td>Day</td>
      <td>15.0</td>
      <td>POLYGON ((-120.29042 34.51665, -120.82317 33.9...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-06-01 20:26:11+00:00</td>
    </tr>
    <tr>
      <th>207</th>
      <td>G2735424106-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230629T170449_2318011_002</td>
      <td>2023-06-29T17:04:49Z</td>
      <td>2023-06-29T17:05:01Z</td>
      <td>Day</td>
      <td>48.0</td>
      <td>POLYGON ((-120.35333 35.27559, -120.83881 34.6...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-06-29 17:04:49+00:00</td>
    </tr>
    <tr>
      <th>292</th>
      <td>G2772438951-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230923T232101_2326615_002</td>
      <td>2023-09-23T23:21:01Z</td>
      <td>2023-09-23T23:21:13Z</td>
      <td>Day</td>
      <td>73.0</td>
      <td>POLYGON ((-120.52930 35.29765, -121.32658 34.6...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-09-23 23:21:01+00:00</td>
    </tr>
    <tr>
      <th>295</th>
      <td>G2772444304-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20230923T232113_2326615_003</td>
      <td>2023-09-23T23:21:13Z</td>
      <td>2023-09-23T23:21:31Z</td>
      <td>Day</td>
      <td>10.0</td>
      <td>POLYGON ((-119.51744 36.06493, -120.67430 35.1...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-09-23 23:21:13+00:00</td>
    </tr>
    <tr>
      <th>309</th>
      <td>G2786272677-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20231014T224006_2328715_002</td>
      <td>2023-10-14T22:40:06Z</td>
      <td>2023-10-14T22:40:18Z</td>
      <td>Day</td>
      <td>66.0</td>
      <td>POLYGON ((-120.79352 35.15521, -121.28294 34.5...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-10-14 22:40:06+00:00</td>
    </tr>
    <tr>
      <th>310</th>
      <td>G2786302498-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20231014T224018_2328715_003</td>
      <td>2023-10-14T22:40:18Z</td>
      <td>2023-10-14T22:40:36Z</td>
      <td>Day</td>
      <td>93.0</td>
      <td>POLYGON ((-120.14165 34.64471, -120.63443 34.0...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-10-14 22:40:18+00:00</td>
    </tr>
    <tr>
      <th>315</th>
      <td>G2786557891-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20231018T210205_2329114_005</td>
      <td>2023-10-18T21:02:05Z</td>
      <td>2023-10-18T21:02:17Z</td>
      <td>Day</td>
      <td>11.0</td>
      <td>POLYGON ((-120.72254 35.89691, -121.20394 35.2...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-10-18 21:02:05+00:00</td>
    </tr>
    <tr>
      <th>318</th>
      <td>G2786556493-LPCLOUD</td>
      <td>EMIT_L2A_RFL_001_20231018T210217_2329114_006</td>
      <td>2023-10-18T21:02:17Z</td>
      <td>2023-10-18T21:02:29Z</td>
      <td>Day</td>
      <td>9.0</td>
      <td>POLYGON ((-120.05733 35.39170, -120.54254 34.7...</td>
      <td>https://data.lpdaac.earthdatacloud.nasa.gov/lp...</td>
      <td>EMITL2ARFL</td>
      <td>2023-10-18 21:02:17+00:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>We can now go back to our <code class="docutils literal notranslate"><span class="pre">folium</span></code> plot above and  re-run the cell to update it based on our filtering.</strong></p>
</section>
</section>
<section id="generating-a-list-of-urls">
<h2>5. Generating a list of URLs<a class="headerlink" href="#generating-a-list-of-urls" title="Link to this heading">#</a></h2>
<p>With our filtered geodataframe we can go back to our <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> search results and filter them.</p>
<p>Create a list of the geodataframe indices to use in filtering our search results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">keep_granules</span> <span class="o">=</span> <span class="n">eco_gdf</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span><span class="o">+</span><span class="n">emit_gdf</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="n">keep_granules</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Filter the results list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">keep_granules</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>After filtering our granules, also want to filter which assets we want from each granule. An asset is an individual file associated with a granule.</p>
<p>Granules often have several assets associated with them, for example, <code class="docutils literal notranslate"><span class="pre">ECO_L2T_LSTE</span></code> has several assets:</p>
<ul class="simple">
<li><p>Water Mask (water)</p></li>
<li><p>Cloud Mask (cloud)</p></li>
<li><p>Quality (QC)</p></li>
<li><p>Land Surface Temperature (LST)</p></li>
<li><p>Land Surface Temperature Error (LST_err)</p></li>
<li><p>Wide Band Emissivity (EmisWB)</p></li>
<li><p>Height (height)</p></li>
</ul>
<p>Create a list of results urls from our <code class="docutils literal notranslate"><span class="pre">filtered_results</span></code> list and print the first 5 results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve URLS for Assets</span>
<span class="n">results_urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">granule</span><span class="o">.</span><span class="n">data_links</span><span class="p">()</span> <span class="k">for</span> <span class="n">granule</span> <span class="ow">in</span> <span class="n">filtered_results</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results_urls</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_water.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_cloud.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_view_zenith.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_height.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_QC.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_LST.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_LST_err.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_EmisWB.tif&#39;],
 [&#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_RFL_001_20230219T202939_2305013_002.nc&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_RFLUNCERT_001_20230219T202939_2305013_002.nc&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_MASK_001_20230219T202939_2305013_002.nc&#39;],
 [&#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_water.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_cloud.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_view_zenith.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_height.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_QC.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_LST.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_LST_err.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_EmisWB.tif&#39;],
 [&#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_RFL_001_20230219T202951_2305013_003.nc&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_RFLUNCERT_001_20230219T202951_2305013_003.nc&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_MASK_001_20230219T202951_2305013_003.nc&#39;],
 [&#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_water.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_cloud.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_view_zenith.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_height.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_QC.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_LST.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_LST_err.tif&#39;,
  &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01/ECOv002_L2T_LSTE_26345_013_10SGD_20230227T172029_0710_01_EmisWB.tif&#39;]]
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">results_urls</span></code> list we just generated contains URLs for all of these assets nested by granule. We can further filter our these to remove unwanted assets by using string matching.</p>
<p>Create a list of strings and enumerate through our results_url list to filter out unwanted assets and remove the nesting.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filtered_asset_links</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># Pick Desired Assets (leave _ on RFL to distinguish from RFLUNC, LST. to distinguish from LST_err)</span>
<span class="n">desired_assets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_RFL_&#39;</span><span class="p">,</span><span class="s1">&#39;_MASK_&#39;</span><span class="p">,</span> <span class="s1">&#39;LST.&#39;</span><span class="p">]</span> <span class="c1"># Add more or do individually for reflectance, reflectance uncertainty, or mask</span>
<span class="c1"># Step through each sublist (granule) and filter based on desired assets.</span>
<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">granule</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results_urls</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">granule</span><span class="p">:</span> 
        <span class="n">asset_name</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">asset</span> <span class="ow">in</span> <span class="n">asset_name</span> <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">desired_assets</span><span class="p">):</span>
            <span class="n">filtered_asset_links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="c1"># Show first 5 asset links           </span>
<span class="n">filtered_asset_links</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01/ECOv002_L2T_LSTE_26223_011_10SGD_20230219T202851_0710_01_LST.tif&#39;,
 &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_RFL_001_20230219T202939_2305013_002.nc&#39;,
 &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202939_2305013_002/EMIT_L2A_MASK_001_20230219T202939_2305013_002.nc&#39;,
 &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ECO_L2T_LSTE.002/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01/ECOv002_L2T_LSTE_26223_012_10SGD_20230219T202943_0710_01_LST.tif&#39;,
 &#39;https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/EMITL2ARFL.001/EMIT_L2A_RFL_001_20230219T202951_2305013_003/EMIT_L2A_RFL_001_20230219T202951_2305013_003.nc&#39;]
</pre></div>
</div>
</div>
</div>
<p>Write this list of files to a text file to have a record of the search, or to use for streaming or downloading the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;../data/search_results.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">filtered_asset_links</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="streaming-or-downloading-data">
<h2>6. Streaming or Downloading Data<a class="headerlink" href="#streaming-or-downloading-data" title="Link to this heading">#</a></h2>
<p>For the workshop, we will stream the data, but either method can be used, and each has trade-offs based on the internet speed, storage space, or use case. The EMIT files are very large due to the number of bands, so operations can take some time if streaming with a slower internet connection. Since the workshop is hosted in a Cloud workspace, we can stream the data directly to the workspace.</p>
<section id="streaming-data-workflow">
<h3>6.1 Streaming Data Workflow<a class="headerlink" href="#streaming-data-workflow" title="Link to this heading">#</a></h3>
<p>For an example of streaming both <strong>netCDF</strong> and <strong>Cloud Optimized GeoTIFF (COG) data</strong> please see notebook 2, <a class="reference internal" href="#02_Working_with_EMIT_Reflectance_and_ECOSTRESS_LST.ipynb"><span class="xref myst">Working With EMIT Reflectance and ECOSTRESS LST</span></a>.</p>
<p>If you plan to stream the data, you can stop here and move to the next notebook.</p>
</section>
<section id="downloading-data-workflow">
<h3>6.2 Downloading Data Workflow<a class="headerlink" href="#downloading-data-workflow" title="Link to this heading">#</a></h3>
<p>To download the scenes, we can use the <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> library to authenticate then download the files.</p>
<p>First, log into Earthdata using the <code class="docutils literal notranslate"><span class="pre">login</span></code> function from the <code class="docutils literal notranslate"><span class="pre">earthaccess</span></code> library. The <code class="docutils literal notranslate"><span class="pre">persist=True</span></code> argument will create a local <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file if it doesn’t exist, or add your login info to an existing <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file. If no Earthdata Login credentials are found in the <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> you’ll be prompted for them. As mentioned in section 1.2, this step is not necessary to conduct searches, but is needed to download or stream data.</p>
<p>We’ve included the canopy water content files in the repository to simplify the notebooks so users don’t need to perform that operation for the examples in the repository. This means that only 3 granules from our list are required to execute the notebooks and walk through the notebooks in the repository. These are included in a separate text file, <code class="docutils literal notranslate"><span class="pre">required_granules.txt</span></code>.</p>
<p>These can be downloading by uncommenting and running the following cells.</p>
<blockquote>
<div><p>Note: If interested users can download all of the files using the cell below and recreate all of the canopy water content files following a workflow similar to the example in notebooks 2 and 3 for all of the necessary scenes. To do this, uncomment the <code class="docutils literal notranslate"><span class="pre">file_list</span></code> object with the <code class="docutils literal notranslate"><span class="pre">search_results.txt</span></code> filepath to download all of the results rather than just what is required.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authenticate using earthaccess</span>
<span class="n">earthaccess</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">persist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;earthaccess.auth.Auth at 0x7f02746b41c0&gt;
</pre></div>
</div>
</div>
</div>
<p>Open the text file containing the URLs you wish to download.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # Open Text File and Read Lines</span>
<span class="c1"># file_list = &#39;../data/required_granules.txt&#39;</span>
<span class="c1"># # file_list = &#39;../data/search_results.txt&#39;</span>
<span class="c1"># with open(file_list) as f:</span>
<span class="c1">#     urls = [line.rstrip(&#39;\n&#39;) for line in f]</span>
</pre></div>
</div>
</div>
</div>
<p>Download the required granules.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # Get requests https Session using Earthdata Login Info</span>
<span class="c1"># fs = earthaccess.get_requests_https_session()</span>
<span class="c1"># # Retrieve granule asset ID from URL (to maintain existing naming convention)</span>
<span class="c1"># for url in urls:</span>
<span class="c1">#     granule_asset_id = url.split(&#39;/&#39;)[-1]</span>
<span class="c1">#     # Define Local Filepath</span>
<span class="c1">#     fp = f&#39;../data/{granule_asset_id}&#39;</span>
<span class="c1">#     # Download the Granule Asset if it doesn&#39;t exist</span>
<span class="c1">#     if not os.path.isfile(fp):</span>
<span class="c1">#         with fs.get(url,stream=True) as src:</span>
<span class="c1">#             with open(fp,&#39;wb&#39;) as dst:</span>
<span class="c1">#                 for chunk in src.iter_content(chunk_size=64*1024*1024):</span>
<span class="c1">#                     dst.write(chunk)</span>
</pre></div>
</div>
</div>
</div>
<p>Congratulations, now you have downloaded concurrent data from the ECOSTRESS and EMIT instruments on the ISS.</p>
</section>
</section>
<section id="contact-info">
<h2>Contact Info:<a class="headerlink" href="#contact-info" title="Link to this heading">#</a></h2>
<p>Email: <a class="reference external" href="mailto:LPDAAC&#37;&#52;&#48;usgs&#46;gov">LPDAAC<span>&#64;</span>usgs<span>&#46;</span>gov</a><br />
Voice: +1-866-573-3222<br />
Organization: Land Processes Distributed Active Archive Center (LP DAAC)¹<br />
Website: <a class="reference external" href="https://lpdaac.usgs.gov/">https://lpdaac.usgs.gov/</a><br />
Date last modified: 05-17-2024</p>
<p>¹Work performed under USGS contract 140G0121D0001 for NASA contract NNG14HH33I.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Panel_02A.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Visualizing hyperspectral signatures of agricultural crops</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">1. Setup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#nasa-earthdata-login-credentials">1.2 NASA Earthdata Login Credentials</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#search-for-ecostress-and-emit-data">2. Search for ECOSTRESS and EMIT Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-spatial-region-of-interest">2.1 Define Spatial Region of Interest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-collections-of-interest">2.2 Define Collections of Interest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-date-range">2.3 Define Date Range</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#searching">2.4 Searching</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#organizing-and-filtering-results">3. Organizing and Filtering Results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-intersecting-coverage">4. Visualizing Intersecting Coverage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#previewing-emit-browse-imagery">4.2 Previewing EMIT Browse Imagery</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-filtering">4.3 Further Filtering</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-a-list-of-urls">5. Generating a list of URLs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#streaming-or-downloading-data">6. Streaming or Downloading Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#streaming-data-workflow">6.1 Streaming Data Workflow</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-data-workflow">6.2 Downloading Data Workflow</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contact-info">Contact Info:</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By IL
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>